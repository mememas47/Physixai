
<!doctype html>
<html lang="ar" dir="rtl">
<head>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhaijaan+2:wght@400;600;700&family=Cairo:wght@400;600;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>physiX AI  </title>
  <style>
    :root{
      --bg:#fbf7ef;
      --card:#ffffff;
      --ink:#1f2937;
      --muted:#6b7280;
      --brand:#8b1d2c;
      --brand2:#c23a4a;
      --line:#e5e7eb;
      --soft:#fff7f1;
      --shadow: 0 10px 25px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: 'Open Sans', sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(139,29,44,.15), transparent 60%),
                  radial-gradient(900px 500px at 110% 10%, rgba(194,58,74,.12), transparent 60%),
                  var(--bg);
      color:var(--ink);
    }
    :lang(ar){
      font-family: 'Cairo', sans-serif;
      direction: rtl;
    }
    .card-buttons{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap; /* ูููุนูู ูุฑูุจูู ููู ุจุนุถ */
    }
    .card-buttons button{
      font-family: 'Cairo', sans-serif;
      white-space: nowrap;
    }
    header{
      position:sticky; top:0; z-index:5;
      background: linear-gradient(90deg, var(--brand), #6f1320);
      color:#fff;
      padding:14px 16px;
      box-shadow: 0 6px 18px rgba(0,0,0,.12);
    }
    .topbar{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex; flex-direction:column; gap:2px;
    }
    .brand h1{
      margin:0; font-size:18px; letter-spacing:.3px;
    }
    .brand p{
      margin:0; font-size:12px; opacity:.9;
    }
    .navbtns{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    button, .chip{
      border:0;
      border-radius:999px;
      padding:10px 12px;
      background:rgba(255,255,255,.12);
      color:#fff;
      cursor:pointer;
      font-weight:600;
      transition:.15s;
    }
    button:hover{transform:translateY(-1px); background:rgba(255,255,255,.18)}
    button:active{transform:translateY(0px)}
    .container{
      max-width:1100px;
      margin:18px auto 60px;
      padding:0 16px;
    }
    
    .hero{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      margin-top:16px;
    }
    
    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
    }
    .panel h2{margin:0 0 6px; font-size:18px}
    .panel p{margin:0; color:var(--muted); line-height:1.6}
    .pillrow{
      display:flex; gap:8px; flex-wrap:wrap; margin-top:12px;
    }
    .pill{
      background:var(--soft);
      border:1px dashed rgba(139,29,44,.35);
      color:var(--brand);
      padding:8px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:12px;
    }

    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:16px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
justify-items: center;

    }

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:0;
      cursor:pointer;
      transition:.15s;
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:auto;
    }
.card{
  width:100%;
  max-width:280px;   /* ุญุฌู ูุฑูุญ ููุงุถุญ */
}
    .card:hover{transform:translateY(-2px); box-shadow: 0 15px 35px rgba(0,0,0,.12)}
    
  .card-image{
  width:100%;
  height:240px;                 /* ููุณ ุงุฑุชูุงุน ุงูุฑุณู */
  
  background-size: contain;     /* ุงูุตูุฑุฉ ูุงููุฉ */
  background-repeat: no-repeat;
  background-position: center;

  background-color:#fff;        /* ุฅุทุงุฑ ุฃุจูุถ ูุธูู */
  border-bottom:1px solid var(--line);
}
    
    .card-content{
      padding:12px 18px 18px 18px;
      flex:1;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow-wrap:break-word;
      word-wrap:break-word;
    }
    
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:800;
      color:var(--brand);
      margin-bottom:10px;
    }
    .badge span{
      background:rgba(139,29,44,.10);
      border:1px solid rgba(139,29,44,.25);
      padding:4px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--brand);
    }
    .card h3{margin:0 0 6px; font-size:14px; line-height:1.4}
    .card p{margin:0 0 8px 0; color:var(--muted); line-height:1.5; font-size:11px}
 .card .sub{
  margin-top:10px;
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

    .mini{
      font-size:11px;
      background:#f3f4f6;
      color:#111827;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid #e5e7eb;
      font-weight:700;
    }

    .hidden{display:none !important}
    .toolbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .crumb{
      color:var(--muted);
      font-size:13px;
    }
    .tabs{
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .tab{
      background:var(--card);
      border:1px solid var(--line);
      color:var(--ink);
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:800;
      font-size:13px;
    }
    .tab.active{
      border-color:rgba(139,29,44,.4);
      background:rgba(139,29,44,.08);
      color:var(--brand);
    }

    .section{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .section .panel h3{margin:0 0 10px; font-size:16px}
    label{display:block; font-weight:800; margin:10px 0 6px}
    textarea, input, select{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      font-size:14px;
      outline:none;
      background:#fff;
    }
    textarea{min-height:120px; resize:vertical}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    .row > *{flex:1}
    .cta{
      background:linear-gradient(90deg, var(--brand), var(--brand2));
      color:#fff;
      border:0;
      padding:10px 14px;
      border-radius:12px;
      font-weight:900;
      cursor:pointer;
      box-shadow:0 10px 18px rgba(139,29,44,.18);
      font-size:13px;
    }
    .cta:hover{filter:brightness(1.05)}
    .out{
      background:#0b1220;
      color:#dbeafe;
      border-radius:14px;
      padding:12px;
      border:1px solid rgba(255,255,255,.08);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      white-space:pre-wrap;
      min-height:140px;
      font-size:12px;
    }
    .note{
      margin-top:8px;
      color:var(--muted);
      font-size:11px;
      line-height:1.6;
    }

    .labBox{
      background:linear-gradient(180deg, #fff, #fff7f1);
      border:1px solid rgba(139,29,44,.15);
      border-radius:var(--radius);
      padding:14px;
    }
    .sliderWrap{
      display:grid;
      grid-template-columns: 1fr 140px;
      gap:10px;
      align-items:center;
      margin:10px 0;
    }
    input[type="range"]{width:100%}
    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top:10px;
    }
    .kpi .k{
      background:#fff;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px;
      font-size:12px;
    }
    .k strong{display:block; color:var(--brand); font-size:12px}
    .k span{color:var(--muted); font-size:11px}
    canvas{
      width:100%;
      height:240px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      margin-top:10px;
    }


    /* Calculator modal */
    .modalOverlay{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
      padding:18px;
    }
    .modalCard{
      width:min(380px, 92vw);
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      background:linear-gradient(90deg, var(--brand), var(--brand2));
      color:#fff;
      font-weight:900;
    }
    .modalHead button{
      background:rgba(255,255,255,.18);
      padding:8px 10px;
      border-radius:12px;
    }
    .calcScreen{
      background:#0b1220;
      color:#dbeafe;
      padding:12px 14px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:16px;
      min-height:56px;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      border-bottom:1px solid rgba(255,255,255,.08);
      overflow:auto;
      white-space:nowrap;
    }
    .calcKeys{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      padding:12px;
    }
    .calcKey{
      border:1px solid var(--line);
      background:#fff;
      color:var(--ink);
      border-radius:14px;
      padding:12px 10px;
      font-weight:900;
      cursor:pointer;
    }
    .calcKey.op{background:rgba(139,29,44,.08); border-color:rgba(139,29,44,.25); color:var(--brand)}
    .calcKey.eq{
  background:linear-gradient(90deg, var(--brand), var(--brand2));
  color:#fff;
  border:0;
}
    .calcKey.wide{grid-column: span 2}


    @media (max-width: 920px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      .section{grid-template-columns:1fr}
      .kpi{grid-template-columns:1fr}
    }
  
:root{
  --dark-blue:#0b3c5d;
  --light-cyan:#bfeaf2;
  --white:#ffffff;
}

body{
  background: linear-gradient(180deg, var(--white), var(--light-cyan));
  color: var(--dark-blue);
}

header.app-header{
  display:flex;
  align-items:center;
  gap:16px;
  padding:16px 20px;
  margin-bottom:20px;
}

header.app-header img{
  width:72px;
  height:auto;
}

.card, .panel{
  background: var(--white);
  border: 2px solid var(--light-cyan);
}

button{
  background: var(--dark-blue);
  color: var(--white);
}

button.secondary{
  background: var(--light-cyan);
  color: var(--dark-blue);
}



/* === Kid-friendly iPad App Theme (override) === */
:root{
  --dark-blue:#0b3c5d;
  --sky:#7dd3fc;
  --light-cyan:#cfefff;
  --white:#ffffff;

  /* override existing tokens */
  --bg: var(--white);
  --card: var(--white);
  --ink: var(--dark-blue);
  --muted:#1f5772;
  --brand: var(--dark-blue);
  --brand2: #0f5f85;
  --line: rgba(11,60,93,.10);
  --soft: rgba(125,211,252,.18);
  --shadow: 0 14px 30px rgba(11,60,93,.14);
  --radius: 24px;
}

body{
  margin: 0;
  font-family: 'Baloo Bhaijaan 2','Cairo','Open Sans',system-ui,sans-serif !important;
  background: #ffffff;
  color: var(--ink);
}

.container{
  max-width: 980px !important; /* feels like an iPad app width */
  margin: 18px auto 80px !important;
  padding: 0 18px !important;
}

/* App header */
header.app-header{
  position: sticky;
  top: 0;
  z-index: 10;
  backdrop-filter: blur(10px);
  background: rgba(255,255,255,.72);
  border-bottom: 1px solid rgba(11,60,93,.10);
  border-radius: 0 0 26px 26px;
  box-shadow: 0 10px 24px rgba(11,60,93,.10);
  margin: 0 0 18px 0 !important;
  padding: 14px 18px !important;
}

header.app-header img{
  width: 68px !important;
  height: 68px !important;
  object-fit: cover;
  border-radius: 18px;
  background: rgba(125,211,252,.25);
  border: 2px solid rgba(11,60,93,.10);
  box-shadow: 0 10px 18px rgba(11,60,93,.12);
}

header.app-header h1{
  margin: 0;
  font-size: 30px;
  letter-spacing: .2px;
}

header.app-header h1::after{
  content: "โก";
  margin-inline-start: 10px;
  font-size: 22px;
  vertical-align: middle;
}

/* Panels/cards */
.panel{
  border: 2px solid rgba(125,211,252,.35) !important;
  box-shadow: var(--shadow) !important;
  padding: 18px !important;
}

.panel h2{
  font-size: 20px !important;
}

.panel p{
  font-size: 15px !important;
}

/* Inputs feel touch-friendly */
input, select, textarea{
  border-radius: 16px !important;
  border: 2px solid rgba(125,211,252,.35) !important;
  padding: 12px 14px !important;
  font-size: 16px !important;
  outline: none;
  background: rgba(255,255,255,.92);
}
input:focus, select:focus, textarea:focus{
  border-color: rgba(11,60,93,.35) !important;
  box-shadow: 0 0 0 6px rgba(125,211,252,.25);
}

/* Buttons: big, pill, iPad-friendly */
button{
  border-radius: 999px !important;
  padding: 12px 16px !important;
  font-size: 16px !important;
  font-weight: 700 !important;
  box-shadow: 0 12px 18px rgba(11,60,93,.14) !important;
  border: 0 !important;
  background: linear-gradient(180deg, #0b3c5d, #0f5f85) !important;
}
button:hover{ transform: translateY(-1px); }
button:active{ transform: translateY(0px); }

/* If there are "secondary" buttons, make them sky */
button.secondary, .btn-secondary{
  background: linear-gradient(180deg, rgba(125,211,252,.95), rgba(125,211,252,.75)) !important;
  color: var(--dark-blue) !important;
}

/* Little rounded โchips/pillsโ */
.pill, .tag, .chip{
  border-radius: 999px !important;
  border: 2px solid rgba(125,211,252,.35) !important;
  background: rgba(125,211,252,.18) !important;
}

/* Canvas area */
canvas{
  border-radius: 22px !important;
  border: 2px solid rgba(125,211,252,.35) !important;
  box-shadow: 0 14px 30px rgba(11,60,93,.12);
}

/* Safe areas for iPad (notched devices) */
@supports (padding: max(0px)){
  body{
    padding-bottom: env(safe-area-inset-bottom);
  }
  header.app-header{
    padding-top: max(14px, env(safe-area-inset-top));
  }
}



/* === Mascot watermark + greeting bubble === */

  background-repeat: no-repeat;
  background-position: 85% 75%;
  background-size: min(520px, 60vw);
  opacity: 0.07; /* faint */
  filter: saturate(0.9) contrast(1.05);
}

/* Ensure app content stays above watermark */
body > *{ position: relative; z-index: 1; }

/* Mascot greeter (bottom corner) */
.mascot-greeter{
  position: fixed;
  right: 16px;
  bottom: 18px;
  z-index: 50;
  display: flex;
  align-items: flex-end;
  gap: 12px;
}
.mascot-greeter img{
  width: 92px;
  height: 92px;
  border-radius: 24px;
  border: 2px solid rgba(125,211,252,.35);
  background: rgba(255,255,255,.75);
  box-shadow: 0 14px 28px rgba(11,60,93,.16);
}
.mascot-bubble{
  max-width: 280px;
  background: rgba(255,255,255,.88);
  border: 2px solid rgba(125,211,252,.35);
  border-radius: 22px;
  padding: 12px 14px;
  box-shadow: 0 14px 30px rgba(11,60,93,.14);
  font-size: 16px;
  line-height: 1.35;
}
.mascot-bubble strong{
  display:block;
  margin-bottom: 4px;
}
.mascot-bubble::after{
  content:"";
  position:absolute;
  right: 86px;
  bottom: 18px;
  width: 18px;
  height: 18px;
  background: rgba(255,255,255,.88);
  border-left: 2px solid rgba(125,211,252,.35);
  border-bottom: 2px solid rgba(125,211,252,.35);
  transform: rotate(45deg);
}
.mascot-bubble-wrap{
  position: relative;
}
.mascot-close{
  position:absolute;
  top: 6px;
  left: 8px;
  width: 30px;
  height: 30px;
  border-radius: 999px;
  border: 0;
  background: rgba(125,211,252,.35);
  color: rgba(11,60,93,.9);
  box-shadow: none;
  padding: 0;
  font-weight: 800;
  cursor: pointer;
}
.mascot-close:active{ transform: none; }


/* === Clean Mascot + Speech Bubble === */
.mascot-greeter{
  position: fixed;
  bottom: 24px;
  right: 24px;
  display: flex;
  align-items: flex-end;
  gap: 14px;
  z-index: 60;
}

.mascot-only{
  width: 96px;
  height: auto;
}

.speech-wrap{
  position: relative;
}

.speech-bubble{
  background: #ffffff;
  color: #0b3c5d;
  border-radius: 26px;
  padding: 14px 18px;
  font-size: 16px;
  line-height: 1.4;
  box-shadow: 0 14px 28px rgba(11,60,93,.18);
  max-width: 280px;
}

.speech-bubble::after{
  content: "";
  position: absolute;
  right: -8px;
  bottom: 24px;
  width: 18px;
  height: 18px;
  background: #ffffff;
  transform: rotate(45deg);
  box-shadow: 4px 4px 10px rgba(11,60,93,.08);
}


/* === Mascot Animations & Interaction === */
@keyframes popIn {
  from { opacity:0; transform: translateY(20px) scale(.9); }
  to { opacity:1; transform: translateY(0) scale(1); }
}

@keyframes wave {
  0% { transform: rotate(0deg); }
  20% { transform: rotate(10deg); }
  40% { transform: rotate(-8deg); }
  60% { transform: rotate(10deg); }
  80% { transform: rotate(-4deg); }
  100% { transform: rotate(0deg); }
}

.mascot-greeter {
  animation: popIn .8s ease-out both;
}

.mascot-only {
  transform-origin: bottom center;
  animation: wave 3s ease-in-out infinite;
}

.ask-btn{
  margin-top:10px;
  background: linear-gradient(180deg,#0b3c5d,#0f5f85);
  color:#fff;
  border:0;
  border-radius:999px;
  padding:8px 14px;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
}

.ask-btn:active{ transform: scale(.97); }



/* === Requested tweak: remove white top bar + move logo into red header === */
header.app-header{ display:none !important; }

.topbar .brand-row{
  display:flex;
  align-items:center;
  gap:12px;
  flex-direction: row; /* RTL-friendly: logo on the right of the name */
}

.topbar .logo{
  width:64px;
  height:64px;
  object-fit:contain;
  border-radius:10px;
  background: rgba(255,255,255,.14);
  padding:4px;
}


/* === Calculator: lighten ONLY the number text (keep button backgrounds as-is) === */
.calcKey:not(.op):not(.eq){
  color:#64748b !important; /* ุฑูู ุฃูุชุญ */
  font-weight:800;
}


/* === Calculator: unify text color (numbers + symbols) without changing buttons === */
.calcKey{
  color:#60a5fa !important; /* ุฃุฒุฑู ูุงุชุญ */
  font-weight:800;
}


/* === Calculator: force ALL text (numbers + symbols like ฯ () ^ etc.) to light blue === */
.calcKeys, 
.calcKeys *{
  color:#60a5fa !important; /* ุฃุฒุฑู ูุงุชุญ ููุญูุฏ */
  font-weight:800;
}


/* === Calculator: numbers + all symbols EXACT same color === */
.calcKey{
  color:#60a5fa !important; /* ุฃุฒุฑู ูุงุชุญ ููุญูุฏ ููุฌููุน */
  font-weight:800;
}


/* === Calculator FINAL FIX: absolutely everything same color === */
.calcKeys *{
  color:#60a5fa !important; /* ููุณ ููู ุงูุนูุงูุงุช ุชูุงูุงู */
  font-weight:800 !important;
}

    /* calculator key palette override */
    .calcKey{
      background: var(--soft) !important;
      color: var(--brand) !important;
      border-color: rgba(139,29,44,.22) !important;
    }
    .calcKey.op{
      background: rgba(31,41,55,.06) !important;
      color: #1f2937 !important;
      border-color: rgba(31,41,55,.18) !important;
    }
    .calcKey.eq{
      color:#edf2f7 !important;
      border:none !important;
    }

  /* Hide KPI/plot results panel; keep only dark explanation box */
  .only-dark-results{display:none!important;}

/* Keep chapter cards visible */
#chaptersGrid{ display:grid !important; }

/* Hide the removed CH1 linear lab UI */
.hide-ch1-linear-lab{ display:none !important; }
.hide-ch1-linear-lab *{ display:none !important; }
/* ุงุฌุนู ุฒุฑ = ูุซู ุฒุฑ ฯ ูุจููุฉ ุงูุฃุฒุฑุงุฑ */
.calcKey.eq{
  background: var(--soft) !important;
  color: var(--brand) !important;
  border: 1px solid rgba(139,29,44,.22) !important;
}

</style>
</head>
<body>

<header>
  <div class="topbar">
    <div class="brand-row">
  <img src="logo.png" alt="logo" class="logo">
<div class="brand">
      <h1>physiX AI </h1>
      <p>ุงุฏุฑุณ โข ุญู โข ุฌุฑูุจ โข ุงูุชุดู โ ููู ูุตูู ูุชุงุจ ููุฒูุงุก 1 (ุฃูู ุซุงููู)</p>
    </div>
</div>

    <div class="navbtns">
      <button id="goHomeBtn" title="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ" type="button">ุงูุฑุฆูุณูุฉ</button>
      <button id="aboutBtn" title="ุนู ุงูุชุทุจูู" type="button">ุนู ุงูุชุทุจูู</button>
    </div>
  </div>
</header>

<div class="container">
  <!-- HOME -->
  <div id="homeView">
    <div class="hero">
      <div class="panel">
        <h2>physiX AI </h2>
        <p>
          ููุตุฉ ุชุนููููุฉ ุชูุงุนููุฉ ุชุณุงุนุฏู ุนูู ููู ูุญู ูุณุงุฆู ููุฒูุงุก 1 ุจุทุฑููุฉ ุฐููุฉ ูููุชุนุฉ.
          ุงุฎุชุฑ ุฃู ูุตู ูู ุงููุตูู ุฃุฏูุงู ูุงุณุชูุชุน ุจุชุฌุฑุจุฉ ุชุนููููุฉ ุดุงููุฉ ุชุฌูุน ุจูู ุงูุดุฑุญ ูุงูุชุทุจูู ุงูุนููู.
        </p>
        <div class="pillrow">

        </div>
      </div>
    </div>

    <div class="grid" id="chaptersGrid"></div>
  </div>

  <!-- CHAPTER -->
  <div id="chapterView" class="hidden">
    <div class="toolbar">
      <div class="crumb" id="crumb"></div>
      <div class="tabs">
        <div class="tab active" data-tab="problems">โ๏ธ ุญู ุงููุณุงุฆู</div>
        <div class="tab" data-tab="lab">๐งช ุงููุนูู ุงูุงูุชุฑุงุถู</div>
        <div class="tab" data-tab="enrich">๐ ุงูุฅุซุฑุงุกุงุช</div>
      </div>
    </div>

    <div class="section">
      <div class="panel" id="problemsPanel">
        <h3>โ๏ธ ุญู ุงููุณุงุฆู ุจุงูุดุฑุญ ุฎุทูุฉ ุจุฎุทูุฉ</h3>

        <label>ุงุฎุชุงุฑู ุงูุฏุฑุณ ุฏุงุฎู ุงููุตู</label>
        <select id="lessonSelect"></select>

        <label>ุงุฎุชุงุฑู ุณุคุงู ุฌุงูุฒ (ุงุฎุชูุงุฑู)</label>
        <select id="questionSelect">
          <option value="" disabled selected>โ ุงุฎุชุงุฑู ุณุคุงููุง โ</option>
        </select>
        <p class="note" style="margin-top:8px">
          ๐ก ุงุฎุชุงุฑู ุณุคุงููุง ุฌุงูุฒูุง ููุธูุฑ ูู ุฒุฑ <b>ุชูููุญ</b> ูุฒุฑ <b>ุญู</b> ูุน ุงูุดุฑุญ.
        </p>

        <label>ุงูุชุจู ุงููุณุฃูุฉ ููุง</label>
        <textarea id="problemInput" placeholder="ูุซุงู: ุฌุณู ูุชูุชู 2 ูุฌู ุชุคุซุฑ ุนููู ููุฉ 10 ูููุชู... ุงุญุณุจู ุงูุชุณุงุฑุน."></textarea>

        <div class="row">
          <button class="cta" id="solveBtn" type="button">ุญูู ู ุงุดุฑุญ</button>
          <button class="cta" id="hintBtn" style="background:linear-gradient(90deg,#1f2937,#111827)" type="button">ุฃุนุทูู ุชูููุญ</button>
        </div>
        <div style="margin-top:10px; display:flex; justify-content:flex-start;">
          <button class="cta" id="openCalcBtn" style="background:linear-gradient(90deg,#2563eb,#1d4ed8)" type="button">๐งฎ ุขูุฉ ุญุงุณุจุฉ</button>
        </div>

        <p class="note">
          โ ูุฐุง ุงููุถุน ูุนูู Offline ุจุฑุฏูุฏ ุชุนููููุฉ ุฐููุฉ ูููุงูุจ ุญู.  
          ๐ง ูุชูุนูู AI ุงูุญูููู: ุงุฑุจุทู ุฒุฑ ุงูุญู ุจุฎุฏูุฉ API ูุงุญููุง.
        </p>
      </div>

      <div class="panel" id="resultPanel">
        <h3>๐ ุงููุชูุฌุฉ ูุงูุดุฑุญ</h3>
        <div class="out" id="aiOut">ุณูุธูุฑ ุดุฑุญ ุงููุชุงุฆุฌ ููุง.</div>
      </div>
    </div>

    <!-- LAB PANEL -->
    <div id="labPanel" class="hidden">
      <!-- CH1 LABS (Chapter 1 only) -->
      <div id="ch1LabContent" class="hidden">
        <div class="panel">
          <h3>๐งช ุชุฌุงุฑุจ ุงููุตู ุงูุฃูู</h3>
          <label>ุงุฎุชุงุฑู ุงูุชุฌุฑุจุฉ</label>
          <select id="labSelectCh1">
            <option value="">โ ุงุฎุชุงุฑู ุชุฌุฑุจุฉ โ</option>
            <option value="fall">๐ช ูู ุชุณูุท ุฌููุน ุงูุฃุฌุณุงู ุจุงูุณุฑุนุฉ ููุณูุงุ</option>
            <option value="spring">๐ ุงูุนูุงูุฉ ุจูู ุงููุชูุฉ ูุทูู ุงููุงุจุถ</option>
          </select>
          <p class="note">ุงุฎุชุงุฑู ุชุฌุฑุจุฉ ูุนุฑุถ ุชูุงุตูููุง.</p>
        </div>

        <!-- Experiment 1: Free fall (coins) -->
        <div id="fallLabCard" class="panel hidden" style="display:none">
          <h3>๐ช ุชุฌุฑุจุฉ ุงุณุชูุตุงุฆูุฉ: ูู ุชุณูุท ุฌููุน ุงูุฃุฌุณุงู ุจุงูุณุฑุนุฉ ููุณูุงุ</h3>
          <p><b>ุณุคุงู ุงูุชุฌุฑุจุฉ:</b> ููู ูุคุซุฑ ูุฒู ุงูุฌุณู ูู ุณุฑุนุฉ ุณููุทูุ</p>
          <p><b>ุงูุฃุฏูุงุช:</b> ุนููุฉ ูุนุฏููุฉ ูุงุญุฏุฉุ ุนููุชุงู ููุชุตูุชุงู (ุดุฑูุท ูุงุตู)ุ ุณุทุญ ุขูู ููุณููุท.</p>

          <p><b>ุงูุฎุทูุงุช:</b></p>
          <ol>
            <li>ุซุจูุชู ุงุฑุชูุงุน ุงูุฅุณูุงุท (ูุซูุงู 1 ูุชุฑ).</li>
            <li>ุฃุณูุทู <b>ุนููุฉ ูุงุญุฏุฉ</b> ููุงุญุธู ุฒูู ูุตูููุง ููุฃุฑุถ.</li>
            <li>ุงูุตูู <b>ุนููุชูู</b> ูุนุงู ุซู ุฃุณูุทูููุง ูู ููุณ ุงูุงุฑุชูุงุน.</li>
            <li>ูุงุฑูู ุฒูู ุงููุตูู ูุงุณุชูุชุฌู ุงููุชูุฌุฉ.</li>
          </ol>

          <p><b>ุงููุชุบูุฑุงุช:</b></p>
          <ul>
            <li><b>ุงููุณุชูู:</b> ุงููุชูุฉ (ุนููุฉ ูุงุญุฏุฉ / ุนููุชุงู).</li>
            <li><b>ุงูุชุงุจุน:</b> ุฒูู ุงูุณููุท (ุฃู ุฒูู ุงููุตูู ููุฃุฑุถ).</li>
            <li><b>ุงูุซูุงุจุช:</b> ุงูุงุฑุชูุงุนุ ุทุฑููุฉ ุงูุฅุณูุงุทุ ููุงู ุงูุณููุท.</li>
          </ul>

          <button class="cta" id="runFallBtn" type="button">ุชูููุฐ ุงูุชุฌุฑุจุฉ</button>
          <div class="out" id="fallResultOut">ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.</div>
        </div>

        <!-- Experiment 2: Spring vs mass -->
        <div id="springLabCard" class="panel hidden" style="display:none">
          <h3>๐ ุชุฌุฑุจุฉ: ุงูุนูุงูุฉ ุจูู ุงููุชูุฉ ูุทูู ุงููุงุจุถ</h3>
          <p><b>ุณุคุงู ุงูุชุฌุฑุจุฉ:</b> ููู ูุคุซุฑ ุนุฏุฏ ุงูุญููุงุช ุงููุนุฏููุฉ ุงููุนููุฉ ูู ุทูู ุงููุงุจุถุ</p>
          <p><b>ุงูุฃุฏูุงุช:</b> ูุงุจุถุ ุญููุงุช ูุนุฏููุฉ ูุชุทุงุจูุฉ (1โ5)ุ ูุณุทุฑุฉ/ุดุฑูุท ููุงุณ.</p>

          <p><b>ุงูุฎุทูุงุช:</b></p>
          <ol>
            <li>ููุณู ุทูู ุงููุงุจุถ ููู ุจุฏูู ุญููุงุช (ุงูุทูู ุงูุงุจุชุฏุงุฆู).</li>
            <li>ุนูููู <b>ุญููุฉ ูุงุญุฏุฉ</b> ูููุณู ุงูุทููุ ุซู ูุฑุฑู ูุน 2 ุซู 3 ุญููุงุช.</li>
            <li>ุงุฑุณูู ุจูุงููุงู ุงูุนูุงูุฉ ุจูู <b>ุนุฏุฏ ุงูุญููุงุช</b> ู<b>ุทูู ุงููุงุจุถ</b>.</li>
            <li>ุชููุนู ุทูู ุงููุงุจุถ ุนูุฏ 4 ุญููุงุช ุซู 5 ุญููุงุชุ ุซู ุงุฎุชุจุฑู ุชููุนู.</li>
          </ol>

          <p><b>ุงููุชุบูุฑุงุช:</b></p>
          <ul>
            <li><b>ุงููุณุชูู:</b> ุนุฏุฏ ุงูุญููุงุช (ููุซู ุงููุชูุฉ ุงููุนููุฉ).</li>
            <li><b>ุงูุชุงุจุน:</b> ุทูู ุงููุงุจุถ.</li>
            <li><b>ุงูุซูุงุจุช:</b> ููุน ุงููุงุจุถุ ุทุฑููุฉ ุงูููุงุณุ ููุงู ุงูุชุนููู.</li>
          </ul>

          <label>ุงุฎุชุงุฑู ุนุฏุฏ ุงูุญููุงุช ุงููุนุฏููุฉ</label>
          <div class="sliderWrap">
            <input type="range" id="ringRange" min="1" max="5" value="1" />
            <input type="number" id="ringVal" value="1" min="1" max="5" />
          </div>

          <button class="cta" id="runSpringBtn" type="button">ุชูููุฐ ุงูุชุฌุฑุจุฉ</button>
          <div class="out" id="springResultOut">ุงุฎุชุงุฑู โุชูููุฐ ุงูุชุฌุฑุจุฉโ ูุนุฑุถ ุงูููุงุณ ูุงูุฑุณู ูุงูุงุณุชูุชุงุฌโฆ</div>

          <canvas id="springPlot"></canvas>
          <p class="note">ููุซู ุงูุฑุณู ุงูุนูุงูุฉ ุจูู ุนุฏุฏ ุงูุญููุงุช (ุงููุญูุฑ ุงูุฃููู) ูุทูู ุงููุงุจุถ (ุงููุญูุฑ ุงูุฑุฃุณู).</p>
        </div>
      </div>

      <!-- DEFAULT LAB (for other chapters) -->
<!-- CH2 LABS (added) -->
<div id="ch2LabContent" class="hidden">
  <div class="panel">
    <h3>๐งช ุชุฌุงุฑุจ ุงููุตู ุงูุซุงูู</h3>
    <label>ุงุฎุชุงุฑู ุงูุชุฌุฑุจุฉ</label>
    <select id="labSelectCh2">
      <option value="">โ ุงุฎุชุงุฑู ุชุฌุฑุจุฉ โ</option>
      <option value="cars">๐๐ ุชุฌุฑุจุฉ ุงุณุชููุงููุฉ: ุฃู ุงูุณูุงุฑุชูู ุฃุณุฑุนุ</option>
      <option value="instv">๐งญ ูุชุฌูุงุช ุงูุณุฑุนุฉ ุงููุญุธูุฉ (ุญุฑูุฉ ุงูุชุฒุงุฒูุฉ)</option>
    </select>
    <p class="note">ุงุฎุชุงุฑู ุชุฌุฑุจุฉ ูุงุญุฏุฉ ูุชุธูุฑ ุงูุชูุงุตูู ุชุญุช (ุงูุชูููุฐุ ุงูุฃุฏูุงุชุ ุงูุฎุทูุงุชุ ุงูุชุญููู/ุงูุงุณุชูุชุงุฌ).</p>
  </div>

  <!-- Experiment 1 -->
  <div id="carsLabCard" class="panel hidden">
    <h3>๐๐ ุชุฌุฑุจุฉ ุงุณุชููุงููุฉ: ุฃู ุงูุณูุงุฑุชูู ุฃุณุฑุนุ</h3>
    <p><b>ุณุคุงู ุงูุชุฌุฑุจุฉ:</b> ูู ุณุจุงู ุณูุงุฑุชูู ูุนุจุฉุ ูู ูููููู ูุนุฑูุฉ ุฃูููุง ุฃุณุฑุนุ</p>

    <p><b>ุงูุฃุฏูุงุช:</b> ุณูุงุฑุชุงู ูุนุจุฉ ุชุนููุงู ุจุงููุงุจุถ (ุฃู ุฏูุน)ุ ุดุฑูุท ููุงุณ/ูุณุทุฑุฉุ ุณุงุนุฉ ุชูููุช (ุงุฎุชูุงุฑู)ุ ุดุฑูุท ูุงุตู ูุชุญุฏูุฏ ุฎุท ุงูุจุฏุงูุฉุ ุณุทุญ ูุณุชูู.</p>

    <p><b>ุงูุฎุทูุงุช:</b></p>
    <ol>
      <li>ุฃุญุถุฑู ุณูุงุฑุชูู ูุนุจุฉ ุชุนููุงู ุจุงูุถุบุงุท ุงููุงุจุถุ ูุถุนูููุง ุนูู ุทุงููุฉ ุงููุฎุชุจุฑ ุฃู ุนูู ุฃู ุณุทุญ ูุณุชูู.</li>
      <li>ุญุฏุฏู ุฎุทุงู ูุจุฏุงูุฉ ุงูุณุจุงู.</li>
      <li>ุนุจูุฆู ูุงุจุถู ุงูุณูุงุฑุชููุ ุซู ุฃุทูููููุง ูู ุฎุท ุงูุจุฏุงูุฉ ูู ุงููุญุธุฉ ููุณูุง.</li>
      <li>ูุงุญุธู ุญุฑูุฉ ุงูุณูุงุฑุชูู ุนู ูุฑุจ ูุชุญุฏุฏู ุฃูููุง ุฃุณุฑุน.</li>
      <li>ูุฑุฑู ุงูุชุฌุฑุจุฉ ูุงุฌูุนู ููุนุงู ูุงุญุฏุงู ูู ุงูุจูุงูุงุช ูุฏุนู ุงุณุชูุชุงุฌู.</li>
    </ol>

    <p><b>ุฃูุซูุฉ ุจูุงูุงุช (ููููุงุฑูุฉ):</b></p>
    <ul>
      <li><b>ูุณุงูุฉ ุฎูุงู 1 ุซุงููุฉ:</b> ุงูุญูุฑุงุก (82 ุณู) โ ุงูุฒุฑูุงุก (76 ุณู).</li>
      <li><b>ุฒูู ููุทุน 1 ูุชุฑ:</b> ุงูุญูุฑุงุก (1.14 ุซ) โ ุงูุฒุฑูุงุก (1.33 ุซ).</li>
    </ul>

    
    <div class="labBox" style="margin:12px 0">
      <label>ูุณุงูุฉ ุงูุณูุงุฑุฉ ุงูุญูุฑุงุก ุฎูุงู ุฒูู ูุญุฏุฏ (ุณู)</label>
      <input type="number" id="redDistCm" value="82" step="1" />
      <label>ูุณุงูุฉ ุงูุณูุงุฑุฉ ุงูุฒุฑูุงุก ุฎูุงู ููุณ ุงูุฒูู (ุณู)</label>
      <input type="number" id="blueDistCm" value="76" step="1" />

      <label>ุงูุฒูู ุงููุณุชุฎุฏู ูููุณุงูุชูู (ุซ)</label>
      <input type="number" id="bothTimeS" value="1" step="0.01" />

      <hr style="border:none;border-top:1px solid var(--line);margin:10px 0">

      <label>ุฒูู ุงูุณูุงุฑุฉ ุงูุญูุฑุงุก ููุทุน 1 ูุชุฑ (ุซ)</label>
      <input type="number" id="redTime1m" value="1.14" step="0.01" />
      <label>ุฒูู ุงูุณูุงุฑุฉ ุงูุฒุฑูุงุก ููุทุน 1 ูุชุฑ (ุซ)</label>
      <input type="number" id="blueTime1m" value="1.33" step="0.01" />
    </div>
    
<button class="cta" id="runCarsBtn" type="button">ุชูููุฐ ุงูุชุฌุฑุจุฉ</button>
    <div class="out" id="carsResultOut">ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.</div>

    <p style="margin-top:10px"><b>ุงูุงุณุชูุชุงุฌ:</b> ุงูุณูุงุฑุฉ ุงูุฃุณุฑุน ูู ุงูุชู ุชูุทุน <b>ูุณุงูุฉ ุฃูุจุฑ</b> ูู ููุณ ุงูุฒููุ ุฃู ุชุญุชุงุฌ <b>ุฒูููุง ุฃูู</b> ููุทุน ููุณ ุงููุณุงูุฉ.</p>
    <p class="note"><b>ุชุนุฑูู ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ:</b> ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ = ุงููุณุงูุฉ ุงูููุทูุนุฉ รท ุงูุฒูู ุงููุณุชุบุฑู.</p>
  </div>

  <!-- Experiment 2 -->
  <div id="instvLabCard" class="panel hidden">
    <h3>๐งญ ุชุฌุฑุจุฉ: ูุชุฌูุงุช ุงูุณุฑุนุฉ ุงููุญุธูุฉ (ุญุฑูุฉ ุงูุชุฒุงุฒูุฉ)</h3>
    <p><b>ุณุคุงู ุงูุชุฌุฑุจุฉ:</b> ููู ูููู ููุฏุงุฑ ูุงุชุฌุงู ุงูุณุฑุนุฉ ุงููุญุธูุฉ ูุฌุณู ููุชุฒุ</p>

    <p><b>ุงูุฃุฏูุงุช:</b> ุฎูุท ุทููู ุชูุฑูุจุงู 1 ูุ ูุชูุฉ ุฐุงุช ุฎุทูุงู (ุฃู ุซูู ุตุบูุฑ)ุ ูุณุงุญุฉ ุญุฑูุฉ ุขููุฉ.</p>

    <p><b>ุงูุฎุทูุงุช:</b></p>
    <ol>
      <li>ุงุฑุจุทู ุฃุญุฏ ุทุฑูู ุฎูุทู ุทููู 1 ู ุจูุชูุฉู ุฐุงุช ุฎุทูุงู.</li>
      <li>ุฃูุณูู ุจูุฏู ุงูุทุฑู ุงูุขุฎุฑ ููุฎูุท ุจุญูุซ ุชุชุฏููู ุงููุชูุฉ ูู ุงูููุงุก.</li>
      <li>ุงุณุญุจู ุงููุชูุฉ ุจุญุฐุฑ ุฅูู ุฃุญุฏ ุงูุฌุงูุจูู ุซู ุงุชุฑูููุง.</li>
      <li>ูุงุญุธู ุงูุญุฑูุฉ ูุงูุณุฑุนุฉ ูุงุชุฌุงู ุญุฑูุฉ ุงููุชูุฉ ูุนุฏุฉ ุงูุชุฒุงุฒุงุช.</li>
      <li>ุฃูููู ุงููุชูุฉ ุนู ุงูุงูุชุฒุงุฒ.</li>
      <li>ุงุฑุณูู ุดููุงู ุชูุถูุญูุงู ุชุจููููู ููู ูุชุฌูุงุช ุงูุณุฑุนุฉ ุงููุญุธูุฉ ุนูุฏ ููุงุท ูุฎุชููุฉ (ุงูููุฉ/ุงูููุชุตู/ุงููุงุน).</li>
    </ol>

    <p><b>ุงูุชุญููู ูุงูุงุณุชูุชุงุฌ:</b></p>
    <ul>
      <li><b>ุฃูู ุชููู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุฃูุจุฑ ูุง ููููุ</b> ุนูุฏ <b>ุฃุฎูุถ ููุทุฉ</b> ูู ูุณุงุฑ ุงูุงูุชุฒุงุฒ.</li>
      <li><b>ุฃูู ุชููู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุฃูู ูุง ููููุ</b> ุนูุฏ <b>ููุฉ ุงููุณุงุฑ</b> ูุชุณุงูู <b>ุตูุฑุงู</b>.</li>
      <li><b>ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ (ุชูุฑูุจ):</b> ูููู ุชูุฏูุฑูุง ุจูุชุฌู ุงูุณุฑุนุฉ ุนูุฏ <b>ููุชุตู ุงููุณุงูุฉ</b> ุจูู ุฃุนูู ูุฃุฎูุถ ููุทุฉ.</li>
    </ul>

    
    <div class="labBox" style="margin:12px 0">
      <label>ุงุฎุชุงุฑู ููุทุฉ ุนูู ุงูุญุฑูุฉ ุงูุงูุชุฒุงุฒูุฉ</label>
      <select id="instvPoint">
        <option value="top">ุงูููุฉ (ุฃุนูู ููุทุฉ)</option>
        <option value="midRight">ุงูููุชุตู ูุชุฌูุฉ ูููููู</option>
        <option value="midLeft">ุงูููุชุตู ูุชุฌูุฉ ูููุณุงุฑ</option>
        <option value="bottom">ุงููุงุน (ุฃุฏูู ููุทุฉ)</option>
      </select>

      <label>ฮx (ุงูุฅุฒุงุญุฉ ุฎูุงู ูุชุฑุฉ ูุตูุฑุฉ) ุจุงููุชุฑ</label>
      <input type="number" id="instvDx" value="0.20" step="0.01" />

      <label>ฮt (ุงูุฒูู) ุจุงูุซุงููุฉ</label>
      <input type="number" id="instvDt" value="0.50" step="0.01" />
    </div>
    
<button class="cta" id="runInstVBtn" type="button">ุชูููุฐ ุงูุชุฌุฑุจุฉ</button>
    <div class="out" id="instvResultOut">ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.</div>
  </div>
</div>


      <div id="defaultLabContent">

      <div class="section">
        <div class="panel hide-ch1-linear-lab">
      <h3>ูุนูู ุงูุญุฑูุฉ ุงูุฎุทูุฉ</h3>
          <div class="labBox">
            <label>ุงูุณุฑุนุฉ ุงูุงุจุชุฏุงุฆูุฉ (ู/ุซ)</label>
            <div class="sliderWrap">
              <input type="range" id="vRange" min="0" max="30" value="5" />
              <input type="number" id="vVal" value="5" />
            </div>

            <label>ุงูุฒูู (ุซุงููุฉ)</label>
            <div class="sliderWrap">
              <input type="range" id="tRange" min="0" max="10" value="2" />
              <input type="number" id="tVal" value="2" />
            </div>

            <label>ุงูุชุณุงุฑุน (ู/ุซยฒ)</label>
            <div class="sliderWrap">
              <input type="range" id="aRange" min="-5" max="5" value="1" step="0.1" />
              <input type="number" id="aVal" value="1" step="0.1" />
            </div>

            <button class="cta" id="runLabBtn" type="button">ุดุบูู ุงููุนูู</button>
          </div>
        </div>

        <div class="panel only-dark-results">
      <h3>๐ ุงููุชุงุฆุฌ</h3>
          <div class="kpi">
            <div class="k">
              <strong>ุงูุฅุฒุงุญุฉ (m)</strong>
              <span id="sOut"> = 0 ูุชุฑ</span>
            </div>
            <div class="k">
              <strong>ุงูุณุฑุนุฉ ุงูููุงุฆูุฉ (m/s)</strong>
              <span id="vxOut"> = 0 ู/ุซ</span>
            </div>
            <div class="k">
              <strong>ุงูุงุณุชูุชุงุฌ</strong>
              <span id="insightOut">ุงุถุจุทู ุงูููู ูุดุบููู ุงููุนูู</span>
            </div>
          </div>
          <canvas id="plot"></canvas>
        </div>
      </div>

      <div class="panel" id="labResultsPanel">
        <h3>๐ ุดุฑุญ ุงููุชุงุฆุฌ</h3>
        <div class="out" id="labOut">๐งช ุงุถุจุทู ุงูููู ูุดุบููู ุงููุนููโฆ ูุณูุธูุฑ ุงูุดุฑุญ ููุง.</div>
      </div>
      </div>

    </div>

    <!-- ENRICH PANEL -->
    <div id="enrichPanel" class="hidden">
      <div class="section">
        <div class="panel">
          <h3>๐ ุงูุฅุซุฑุงุกุงุช</h3>
          <label>ุงุฎุชุงุฑู ููุน ุงูุฅุซุฑุงุก</label>
          <select id="enrichType">
            <option value="concept">ููููู ูุชูุฏู</option>
            <option value="history">ุชุงุฑูุฎ ุงูููุฒูุงุก</option>
            <option value="realworld">ุชุทุจููุงุช ุญููููุฉ</option>
            <option value="challenge">ุชุญุฏู ุฅุถุงูู</option>
          </select>
          <button class="cta" id="genEnrichBtn" style="margin-top:12px" type="button">ุชูููุฏ ุฅุซุฑุงุก</button>
        </div>

        <div class="panel">
          <h3>๐ ุงููุญุชูู</h3>
          <div class="out" id="enrichOut">ุงุฎุชุฑู ููุน ุฅุซุฑุงุก ูุงุถุบุทู ุงูุชูููุฏโฆ</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ABOUT -->
  <div id="aboutView" class="hidden">
    <div class="panel">
      <h2>ุนู ุงูุชุทุจูู</h2>
      <p>
   ุชุทุจูู ุชุนูููู ุฐูู ูููุฒูุงุก 1 (ุฃูู ุซุงููู) ูููุฑ:
      </p>
      <ul>
        <li><b>ุญู ูุณุงุฆู:</b> ุงูุชุจู ุงููุณุฃูุฉ ูุงุญุตูู ุนูู ุดุฑุญ ุฎุทูุฉ ุจุฎุทูุฉ.</li>
        <li><b>ูุนูู ุงูุชุฑุงุถู:</b> ุฌุฑุจู ุงููุนุงุฏูุงุช ูุงูููุงููู ุจุดูู ุชูุงุนูู.</li>
        <li><b>ุฅุซุฑุงุกุงุช:</b> ูุญุชูู ุฅุถุงูู ุนู ุงูููุงููู ูุงูุชุทุจููุงุช.</li>
      </ul>
      <button id="backFromAbout" class="cta" type="button">ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ</button>
    </div>
  </div>
</div>


<!-- CALCULATOR MODAL -->
<div id="calcModal" class="modalOverlay hidden" aria-hidden="true">
  <div class="modalCard" role="dialog" aria-modal="true" aria-label="ุขูุฉ ุญุงุณุจุฉ">
    <div class="modalHead">
      <div>๐งฎ ุขูุฉ ุญุงุณุจุฉ</div>
      <button id="closeCalcBtn" title="ุฅุบูุงู">โ</button>
    </div>
    <div class="calcScreen" id="calcScreen">0</div>
    <div class="calcKeys" id="calcKeys">
      <button class="calcKey op" data-k="C">C</button>
      <button class="calcKey op" data-k="(">(</button>
      <button class="calcKey op" data-k=")">)</button>
      <button class="calcKey op" data-k="DEL">โซ</button>

      <button class="calcKey" data-k="7">7</button>
      <button class="calcKey" data-k="8">8</button>
      <button class="calcKey" data-k="9">9</button>
      <button class="calcKey op" data-k="รท">รท</button>

      <button class="calcKey" data-k="4">4</button>
      <button class="calcKey" data-k="5">5</button>
      <button class="calcKey" data-k="6">6</button>
      <button class="calcKey op" data-k="ร">ร</button>

      <button class="calcKey" data-k="1">1</button>
      <button class="calcKey" data-k="2">2</button>
      <button class="calcKey" data-k="3">3</button>
      <button class="calcKey op" data-k="โ">โ</button>

      <button class="calcKey" data-k="0">0</button>
      <button class="calcKey" data-k=".">.</button>
      <button class="calcKey op" data-k="ฯ">ฯ</button>
      <button class="calcKey op" data-k="+">+</button>

      <button class="calcKey op" data-k="โ">โ</button>
      <button class="calcKey op" data-k="^2">xยฒ</button>
      <button class="calcKey eq wide" data-k="=">=</button>
    </div>
  </div>
</div>


<script>
  const chapters = [
    {
      id:"ch1",
      title:"ุงููุตู 1: ูุฏุฎู ุฅูู ุนูู ุงูููุฒูุงุก",
      image:"ch1-intro.jpg",
      lessons:[
        {id:"1-1", name:"ุงูุฏุฑุณ ุงูุฃูู (1-1): ูุง ุงูููุฒูุงุก"},
        {id:"1-2", name:"ุงูุฏุฑุณ ุงูุซุงูู (1-2): ุงููููุงุช ุงูููุฒูุงุฆูุฉ"},
        {id:"ch1_eval", name:"ุชูููู ุงููุตู ุงูุฃูู"},
        {id:"ch1_exam", name:"ุงูุงุฎุชุจุงุฑ ุงููููู ูููุตู ุงูุฃูู"}
      ],
      focus:"ุงูููุงููู ุงูุฃุณุงุณูุฉุ ุงููุญุฏุงุชุ ุงูููุงุณ."
    },
    {
      id:"ch2",
      title:"ุงููุตู 2: ุชูุซูู ุงูุญุฑูุฉ",
      image:"ch2-motion.jpg",
      lessons:[
        {id:"2-1", name:"ุงูุฏุฑุณ ุงูุฃูู (2-1): ุชุตููุฑ ุงูุญุฑูุฉ"},
        {id:"2-2", name:"ุงูุฏุฑุณ ุงูุซุงูู (2-2): ุงููููุน ูุงูุฒูู"},
        {id:"2-3", name:"ุงูุฏุฑุณ ุงูุซุงูุซ (2-3): ููุญูู ุงููููุนโุงูุฒูู"},
        {id:"2-4", name:"ุงูุฏุฑุณ ุงูุฑุงุจุน (2-4): ุงูุณุฑุนุฉ ุงููุชุฌูุฉ"},
        {id:"ch2_eval", name:"ุชูููู ุงููุตู ุงูุซุงูู "},
        {id:"ch2_exam", name:"ุงูุงุฎุชุจุงุฑ ุงููููู ูููุตู ุงูุซุงูู"}
      ],
      focus:"ุงูุญุฑูุฉ ุงูุฎุทูุฉุ ุงููุชุฌูุงุชุ ุงูุฑุณูู ุงูุจูุงููุฉ."
    },
    {
      id:"ch3",
      title:"ุงููุตู 3: ุงูุญุฑูุฉ ุงููุชุณุงุฑุนุฉ ุจุงูุชุธุงู",
      image:"ch3-vectors.jpg",
      lessons:[
        {id:"3-1", name:"3-1 ุงูุชุณุงุฑุน ุงูููุชุธู"},
        {id:"3-2", name:"3-2 ูุนุงุฏูุงุช ุงูุญุฑูุฉ"},
        {id:"3-3", name:"3-3 ุงูุณููุท ุงูุญุฑ"}
      ],
      focus:"ูุนุงุฏูุงุช ุงูุญุฑูุฉุ ุงูุชุณุงุฑุน ุงูุซุงุจุชุ ุงูุณููุท ุงูุญุฑ."
    },
    {
      id:"ch4",
      title:"ุงููุตู 4: ุงูููู ูู ุจุนุฏ ูุงุญุฏ",
      image:"ch4-forces.jpg",
      lessons:[
        {id:"4-1", name:"4-1 ุงูููุฉ ูุงูุญุฑูุฉ"},
        {id:"4-2", name:"4-2 ุงุณุชุฎุฏุงู ููุงููู ูููุชู"},
        {id:"4-3", name:"4-3 ููู ุงูุชุฃุซูุฑ ุงููุชุจุงุฏู"}
      ],
      focus:"ููุงููู ูููุชูุ ูุฎุทุทุงุช ุงูุฌุณู ุงูุญุฑุ ุงูุชูุงุนู."
    },
    {
      id:"ch5",
      title:"ุงููุตู 5: ุงูููู ูู ุจุนุฏูู",
      image:"ch5-applications.jpg",
      lessons:[
        {id:"5-1", name:"5-1 ุงููุชุฌูุงุช"},
        {id:"5-2", name:"5-2 ุงูุงุญุชูุงู"},
        {id:"5-3", name:"5-3 ุงูููุฉ ูุงูุญุฑูุฉ ูู ุจุนุฏูู"}
      ],
      focus:"ุชุญููู ุงููุชุฌูุงุชุ ุงูุงุญุชูุงูุ ุงูุญุฑูุฉ ุนูู ูุณุชูู ูุงุฆู."
    },
    {
      id:"ch6",
      title:"ุงููุตู 6: ุงูุญุฑูุฉ ูู ุจุนุฏูู",
      image:"ch6-2d.jpg",
      lessons:[
        {id:"6-1", name:"6-1 ุญุฑูุฉ ุงูููุฐูู"},
        {id:"6-2", name:"6-2 ุงูุญุฑูุฉ ุงูุฏุงุฆุฑูุฉ"},
        {id:"6-3", name:"6-3 ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุณุจูุฉ"}
      ],
      focus:"ุงูููุฐููุงุชุ ุงูุฏุงุฆุฑูุฉุ ุงูุญุฑูุฉ ุงููุณุจูุฉ."
    },
  ];

  const homeView = document.getElementById("homeView");
  const chapterView = document.getElementById("chapterView");
  const aboutView = document.getElementById("aboutView");
  const chaptersGrid = document.getElementById("chaptersGrid");
  const crumb = document.getElementById("crumb");
  const lessonSelect = document.getElementById("lessonSelect");
  const questionSelect = document.getElementById("questionSelect");

  // ุชุญุฏูุซ ูุงุฆูุฉ ุงูุฃุณุฆูุฉ ุนูุฏ ุชุบููุฑ ุงุฎุชูุงุฑ ุงูุฏุฑุณ/ุงูุชูููู/ุงูุงุฎุชุจุงุฑ
  lessonSelect.addEventListener("change", () => {
    selectedQuestion = null;
    if(questionSelect) questionSelect.value = "";
    refreshQuestionSelect();
  });

  const problemsPanel = document.getElementById("problemsPanel");
  const labPanel = document.getElementById("labPanel");
  const enrichPanel = document.getElementById("enrichPanel");
  const aiOut = document.getElementById("aiOut");
  const labOut = document.getElementById("labOut");
  const problemInput = document.getElementById("problemInput");
  const solveBtn = document.getElementById("solveBtn");
  const hintBtn = document.getElementById("hintBtn");
  const goHomeBtn = document.getElementById("goHomeBtn");
  const aboutBtn = document.getElementById("aboutBtn");
  const backFromAbout = document.getElementById("backFromAbout");
  const vRange = document.getElementById("vRange");
  const tRange = document.getElementById("tRange");
  const aRange = document.getElementById("aRange");
  const vVal = document.getElementById("vVal");
  const tVal = document.getElementById("tVal");
  const aVal = document.getElementById("aVal");
  const runLabBtn = document.getElementById("runLabBtn");
  const sOut = document.getElementById("sOut");
  const vxOut = document.getElementById("vxOut");
  const insightOut = document.getElementById("insightOut");
  const canvas = document.getElementById("plot");
  const ctx = canvas.getContext("2d");
  // Chapter 1 labs UI
  const ch1LabContent = document.getElementById("ch1LabContent");
  const defaultLabContent = document.getElementById("defaultLabContent");
  const labSelectCh1 = document.getElementById("labSelectCh1");
  const fallLabCard = document.getElementById("fallLabCard");
  const springLabCard = document.getElementById("springLabCard");
  const runFallBtn = document.getElementById("runFallBtn");
  const fallResultOut = document.getElementById("fallResultOut");

  const ringRange = document.getElementById("ringRange");
  const ringVal = document.getElementById("ringVal");
  const runSpringBtn = document.getElementById("runSpringBtn");
  const springResultOut = document.getElementById("springResultOut");
  const springCanvas = document.getElementById("springPlot");
  const springCtx = springCanvas.getContext("2d");


  // ูุถุจุท ุฏูุฉ ุงูุฑุณู ุนูู ุงูุดุงุดุงุช ุงููุฎุชููุฉ (ุฎุตูุตุงู ุงูุขูุจุงุฏ)
  function fitCanvas(cnv, desiredCssHeight=240){
    if(!cnv) return;
    const dpr = window.devicePixelRatio || 1;
    // ุงุฌุนู ุงูุงุฑุชูุงุน ูุทุงุจูุงู ูู CSS
    cnv.style.height = desiredCssHeight + "px";
    // ุงุฌุนู ุงูุนุฑุถ ูุชุจุน ุนุฑุถ ุงูุนูุตุฑ ูู ุงูุตูุญุฉ
    const cssW = cnv.clientWidth || cnv.parentElement?.clientWidth || 300;
    const cssH = desiredCssHeight;
    cnv.width  = Math.max(1, Math.floor(cssW * dpr));
    cnv.height = Math.max(1, Math.floor(cssH * dpr));
    const c = cnv.getContext("2d");
    if(c) c.setTransform(dpr,0,0,dpr,0,0);
  }

  function fitAllCanvases(){
    fitCanvas(canvas, 240);
    fitCanvas(springCanvas, 240);
  }
  window.addEventListener("resize", fitAllCanvases);
  // ูุงุฏููุง ูุฑุฉ ุนูุฏ ุงูุชุญููู
  setTimeout(fitAllCanvases, 0);

  function updateLabForChapter(){
    const chId = (currentChapter && currentChapter.id) ? currentChapter.id : "";
    const isCh1 = chId === "ch1";
    const isCh2 = chId === "ch2";

    const ch2LabContent = document.getElementById("ch2LabContent");
    const defaultLabContent = document.getElementById("defaultLabContent");

    const labResultsPanel = document.getElementById("labResultsPanel");

    // ูุตู 1: ุงุนุฑุถ ุชุฌุงุฑุจ ุงููุตู ุงูุฃูู ููุท
    if(isCh1){
      if(ch1LabContent) ch1LabContent.classList.remove("hidden");
      if(ch2LabContent) ch2LabContent.classList.add("hidden");
      if(defaultLabContent) defaultLabContent.classList.add("hidden");
      if(labResultsPanel) labResultsPanel.classList.add("hidden");
      return;
    }

    // ูุตู 2: ุงุนุฑุถ ุชุฌุงุฑุจ ุงููุตู ุงูุซุงูู ููุท
    if(isCh2){
      if(ch1LabContent) ch1LabContent.classList.add("hidden");
      if(ch2LabContent) ch2LabContent.classList.remove("hidden");
      if(defaultLabContent) defaultLabContent.classList.add("hidden");
      if(labResultsPanel) labResultsPanel.classList.remove("hidden");
      return;
    }

    // ุจุงูู ุงููุตูู: ุงุนุฑุถ ุงููุนูู ุงูุงูุชุฑุงุถู ุงูุงูุชุฑุงุถู
    if(ch1LabContent) ch1LabContent.classList.add("hidden");
    if(ch2LabContent) ch2LabContent.classList.add("hidden");
    if(defaultLabContent) defaultLabContent.classList.remove("hidden");
    if(labResultsPanel) labResultsPanel.classList.add("hidden");
  }

  function resetCh1LabView(){
    if(labSelectCh1) labSelectCh1.value = "";
    if(fallLabCard) fallLabCard.classList.add("hidden");
    if(springLabCard) springLabCard.classList.add("hidden");
    if(fallResultOut) fallResultOut.textContent = "ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.";
    if(springResultOut) springResultOut.textContent = "ุงุฎุชุงุฑู โุชูููุฐ ุงูุชุฌุฑุจุฉโ ูุนุฑุถ ุงูููุงุณ ูุงูุฑุณู ูุงูุงุณุชูุชุงุฌโฆ";
    if(ringRange){ ringRange.value = 1; }
    if(ringVal){ ringVal.value = 1; }
    drawSpringPlot(1);
  }

  // Sync range/number for rings
  if(ringRange && ringVal){
    ringRange.addEventListener("input", () => ringVal.value = ringRange.value);
    ringVal.addEventListener("input", () => {
      let v = Number(ringVal.value);
      if(Number.isNaN(v)) v = 1;
      v = Math.max(1, Math.min(5, v));
      ringVal.value = v;
      ringRange.value = v;
    });
  }

  // Select experiment (Chapter 1)
  if(labSelectCh1){
    labSelectCh1.addEventListener("change", () => {
      // hide all first
      if(fallLabCard){ fallLabCard.classList.add("hidden"); fallLabCard.style.display="none"; }
      if(springLabCard){ springLabCard.classList.add("hidden"); springLabCard.style.display="none"; }

      // show selected
      if(labSelectCh1.value === "fall" && fallLabCard){
        fallLabCard.classList.remove("hidden");
        fallLabCard.style.display="";
      }
      if(labSelectCh1.value === "spring" && springLabCard){
        springLabCard.classList.remove("hidden");
        springLabCard.style.display="";
      }
    });
  }


// Run fall experiment (simulated outcome)
  function runFallLabSim(){
    if(!fallResultOut) return;
    fallResultOut.textContent =
      "๐ ุงูููุงุญุธุฉ: ูุตูุช ุงูุนููุฉ ุงููุงุญุฏุฉ ูุงูุนููุชุงู (ุงูููุชุตูุชุงู) ููุฃุฑุถ ูู ููุช ูุชูุงุฑุจ ุฌุฏุงู ุนูุฏ ุฅุณูุงุทููุง ูู ููุณ ุงูุงุฑุชูุงุน.\n\n" +
      "โ ุงูุงุณุชูุชุงุฌ: ูู ุงูุณููุท ุงูุญุฑ (ูุน ุฅููุงู ููุงููุฉ ุงูููุงุก) ุชุณูุท ุงูุฃุฌุณุงู ุจุงูุชุณุงุฑุน ููุณู gุ ูุฐูู ูุง ูุนุชูุฏ ุฒูู ุงูุณููุท ุนูู ุงููุชูุฉ.";
    const aiOutBox = document.getElementById("aiOut");
  if(aiOutBox) aiOutBox.textContent = "๐ช ูุชูุฌุฉ ุชุฌุฑุจุฉ ุงูุณููุท ุงูุญุฑ\n\n" + fallResultOut.textContent;
}
  if(runFallBtn) runFallBtn.addEventListener("click", runFallLabSim);

  // Spring experiment model and plot
  // ููุชุฑุถ ุทูู ุงุจุชุฏุงุฆู 10 ุณูุ ููู ุญููุฉ ุชุฒูุฏ ุงูุทูู 2 ุณู (ูููุฐุฌ ุชุนูููู ูุจุณุท)
  function springLength(rings){
    return 10 + rings * 2;
  }

  function runSpringLabSim(){
    const r = ringVal ? Number(ringVal.value) : 1;
    const L = springLength(r);
    if(springResultOut){
      springResultOut.textContent =
        `๐ ุงูููุงุณ: ุนูุฏ ุชุนููู ${r} ุญููุฉ/ุญููุงุช โ ุทูู ุงููุงุจุถ โ ${L.toFixed(1)} ุณู.\n\n` +
        "โ ุงูุงุณุชูุชุงุฌ: ูุฒุฏุงุฏ ุทูู ุงููุงุจุถ ุจุฒูุงุฏุฉ ุงููุชูุฉ ุงููุนููุฉ (ุนูุงูุฉ ุทุฑุฏูุฉ ุชูุฑูุจุงู).";
    }
  const aiOutBox = document.getElementById("aiOut");
  if(aiOutBox && springResultOut) aiOutBox.textContent = "๐ ูุชูุฌุฉ ุชุฌุฑุจุฉ ุงููุงุจุถ\n\n" + springResultOut.textContent;
    drawSpringPlot(r);
  }
  if(runSpringBtn) runSpringBtn.addEventListener("click", runSpringLabSim);

  function drawSpringPlot(currentRings){
    if(!springCanvas) return;
    const W = springCanvas.clientWidth || 300, H = 240;
    springCtx.clearRect(0,0,W,H);

    const padL=70, padR=20, padT=20, padB=55;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;

    // data points 1..5
    const pts = [];
    let yMax = 0;
    for(let r=1;r<=5;r++){
      const y = springLength(r);
      pts.push({x:r, y});
      yMax = Math.max(yMax, y);
    }
    const yMin = 0;
    yMax = Math.max(1, yMax);

    // axes
    springCtx.strokeStyle = "#ddd";
    springCtx.lineWidth = 1;
    springCtx.beginPath();
    springCtx.moveTo(padL, padT);
    springCtx.lineTo(padL, H-padB);
    springCtx.lineTo(W-padR, H-padB);
    springCtx.stroke();

    // line
    springCtx.strokeStyle = "#8b1d2c";
    springCtx.lineWidth = 2;
    springCtx.beginPath();
    pts.forEach((p,i)=>{
      const px = padL + ((p.x-1)/(5-1))*plotW;
      const py = (H-padB) - ((p.y-yMin)/(yMax-yMin))*plotH;
      if(i===0) springCtx.moveTo(px,py);
      else springCtx.lineTo(px,py);
    });
    springCtx.stroke();

    // highlight current point
    const p = pts.find(z=>z.x===currentRings) || pts[0];
    const hx = padL + ((p.x-1)/(5-1))*plotW;
    const hy = (H-padB) - ((p.y-yMin)/(yMax-yMin))*plotH;
    springCtx.fillStyle = "#8b1d2c";
    springCtx.beginPath();
    springCtx.arc(hx, hy, 5, 0, Math.PI*2);
    springCtx.fill();
  }

  const enrichType = document.getElementById("enrichType");
  const genEnrichBtn = document.getElementById("genEnrichBtn");
  const enrichOut = document.getElementById("enrichOut");

  // Calculator (popup)
  const openCalcBtn = document.getElementById("openCalcBtn");
  const calcModal = document.getElementById("calcModal");
  const closeCalcBtn = document.getElementById("closeCalcBtn");
  const calcScreen = document.getElementById("calcScreen");
  const calcKeys = document.getElementById("calcKeys");
  let calcExpr = "";

  function openCalc(){
    if(!calcModal) return;
    calcModal.classList.remove("hidden");
    calcModal.setAttribute("aria-hidden","false");
    updateCalcScreen();
  }
  function closeCalc(){
    if(!calcModal) return;
    calcModal.classList.add("hidden");
    calcModal.setAttribute("aria-hidden","true");
  }
  function updateCalcScreen(){
    if(!calcScreen) return;
    calcScreen.textContent = calcExpr.trim() ? calcExpr : "0";
  }

  function computeExpr(expr){
    let s = (expr || "").trim();
    if(!s) return "";
    // normalize symbols
    s = s.replaceAll("ร","*").replaceAll("รท","/").replaceAll("โ","-");
    // square token: append **2 to the previous term
    s = s.replace(/\^2/g, "**2");
    // sqrt: โ( ... ) => Math.sqrt( ... )
    s = s.replaceAll("โ(", "Math.sqrt(");
    // โnumber => Math.sqrt(number)
    s = s.replace(/โ\s*([0-9.]+)/g, "Math.sqrt($1)");
    // pi
    s = s.replaceAll("ฯ", "Math.PI");

    // implicit multiplication:
    // 2ฯ   -> 2*Math.PI
    // ฯ2   -> Math.PI*2
    // 2(3) -> 2*(3)
    // )(   -> )*(
    // )ฯ   -> )*Math.PI
    // ฯ(   -> Math.PI*(
    s = s.replace(/(\d|\))\s*(Math\.PI|Math\.sqrt|\()/g, "$1*$2");
    s = s.replace(/(Math\.PI|\))\s*(\d)/g, "$1*$2");
    s = s.replace(/(Math\.PI)\s*(\()/g, "$1*$2");
    s = s.replace(/(\))\s*(Math\.PI)/g, "$1*$2");

    // allow only Math.PI and Math.sqrt as lettered tokens
    const safe = s.replaceAll("Math.PI","").replaceAll("Math.sqrt","");
    // reject any other letters/underscores
    if(/[A-Za-z_]/.test(safe)) return null;
    // only allow a safe subset of remaining characters
    if(/[^0-9+\-*/().\s]/.test(safe)) return null;

    try{
      const val = Function('"use strict"; return (' + s + ')')();
      if(!Number.isFinite(val)) return null;
      return String(val);
    }catch(e){
      return null;
    }
  }

  function handleKey(k){
    if(k === "C"){
      calcExpr = "";
      updateCalcScreen();
      return;
    }
    if(k === "DEL"){
      calcExpr = calcExpr.slice(0, -1);
      updateCalcScreen();
      return;
    }
    if(k === "="){
      const res = computeExpr(calcExpr);
      calcExpr = (res === null) ? "ุฎุทุฃ" : res;
      updateCalcScreen();
      return;
    }
    if(k === "^2"){
      // attach square marker
      calcExpr += "^2";
      updateCalcScreen();
      return;
    }
    // if last result was "ุฎุทุฃ" and user types, reset
    if(calcExpr === "ุฎุทุฃ") calcExpr = "";
    calcExpr += k;
    updateCalcScreen();
  }

  if(openCalcBtn) openCalcBtn.addEventListener("click", openCalc);
  if(closeCalcBtn) closeCalcBtn.addEventListener("click", closeCalc);

  // click outside closes
  if(calcModal){
    calcModal.addEventListener("click", (e) => {
      if(e.target === calcModal) closeCalc();
    });
  }

  // key buttons
  if(calcKeys){
    calcKeys.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if(!btn) return;
      const k = btn.getAttribute("data-k");
      if(!k) return;
      handleKey(k);
    });
  }

  // ESC closes
  document.addEventListener("keydown", (e) => {
    if(e.key === "Escape" && calcModal && !calcModal.classList.contains("hidden")){
      closeCalc();
    }
  });

  const resultPanel = document.getElementById("resultPanel");
  const tabs = Array.from(document.querySelectorAll(".tab"));
  let currentChapter = null;

  const questionBank = {
    ch1: [
      {
        id:"1",
        lesson:"1-1",
        group:"chapter",
        text:"ูุตุจุงุญ ููุงููุชู 50.0ฮฉ ููุตูู ุจุจุทุงุฑูุฉ 9.0V. ุงุญุณุจู ุดุฏุฉ ุงูุชูุงุฑ.",
        hint:"ุงุณุชุฎุฏูู ูุงููู ุฃูู: I = V/R.",
        solution:"I = 9.0 / 50.0 = 0.18 A",
      },
      {
        id:"2",
        lesson:"1-1",
        group:"chapter",
        text:"ุฏุฑุงุฌุฉ ุชุจุฏุฃ ูู ุงูุณููู ูุชุชุณุงุฑุน 6 m/sยฒ ููุฏุฉ 4 s. ุงุญุณุจู ุงูุณุฑุนุฉ ุงูููุงุฆูุฉ.",
        hint:"ุฅุฐุง ุงูุจุฏุงูุฉ ูู ุงูุณููู: v = a t.",
        solution:"v = 6ร4 = 24 m/s",
      },
      {
        id:"3",
        lesson:"1-1",
        group:"chapter",
        text:"ุฌุณู ูุจุฏุฃ ูู ุงูุณููู ูุตู ุฅูู 4.0 m/s ุจุนุฏ ูุทุน 0.400 m ุจุชุณุงุฑุน ุซุงุจุช. ุงุญุณุจู ุงูุชุณุงุฑุน.",
        hint:"ุงุณุชุฎุฏูู vยฒ = v0ยฒ + 2 a ฮx ูุน v0=0.",
        solution:"a = vยฒ/(2ฮx) = 16/(0.8)=20 m/sยฒ",
      },
      {
        id:"4",
        lesson:"1-1",
        group:"chapter",
        text:"ููุฉ ุนููุฏูุฉ 520 N ุชุคุซุฑ ุนูู ุณุทุญุ ููุงู ุงูุถุบุท 32500 N/mยฒ. ุงุญุณุจู ุงููุณุงุญุฉ.",
        hint:"P = F/A โ A = F/P.",
        solution:"A = 520 / 32500 = 0.016 mยฒ",
      },
      {
        id:"5",
        lesson:"1-1",
        group:"chapter",
        text:"ููุงุฐุง ูุณุชุฎุฏู ุงููุนุงุฏูุงุช ููุตู ููุงููู ุงูููุฒูุงุกุ",
        hint:"ููุฑู: ุงููุนุงุฏูุฉ ุชุฑุจุท ูุชุบูุฑุงุช ููููู ุงุฎุชุจุงุฑูุง.",
        solution:"ูุฃููุง ุชุนุทู ุนูุงูุฉ ูููุฉ ุฏูููุฉ ุจูู ุงููุชุบูุฑุงุช ูุชุณูุญ ุจุงูุชูุจุค ูุงูุชุญูู ุจุงูุชุฌุฑุจุฉ.",
      },
      {
        id:"6",
        lesson:"1-1",
        group:"chapter",
        text:"ุงุณุชูุชุฌู ูุญุฏุฉ ุงูุชุณูุง (T) ูู ุงูุนูุงูุฉ F = B q v.",
        hint:"ุฃุนูุฏู ุชุฑุชูุจูุง: B = F/(qv) ุซู ุจุฏููู ุงููุญุฏุงุช.",
        solution:"ูุญุฏุฉ B = N/(Aยทm) (ูุชูุงูุฆ kg/(Aยทsยฒ)).",
      },
      {
        id:"7",
        lesson:"1-1",
        group:"chapter",
        text:"ุฃุนูุฏู ุชุฑุชูุจ F = B q v ูุฅูุฌุงุฏ ุงูุณุฑุนุฉ v.",
        hint:"ุงูุณูู ุงูุทุฑููู ุนูู Bq.",
        solution:"v = F/(Bq).",
      },
      {
        id:"8",
        lesson:"1-1",
        group:"chapter",
        text:"ููุณ g ููุงูุช 9.4 m/sยฒ. ูู ุงูููุงุณ ููุจูู ููุงุฑูุฉ ุจู 9.80ุ ุนููู.",
        hint:"ุงุญุณุจู ูุณุจุฉ ุงูุฎุทุฃ ุงูุชูุฑูุจูุฉ.",
        solution:"ุงููุฑู 0.40 โ 4%ุ ุบุงูุจูุง ุบูุฑ ููุจูู ุฅู ูุงูุช ุฃุฏูุงุชู ุชุณูุญ ุจุฎุทุฃ ุฃูู. ูุฏ ูููู ุจุณุจุจ ุฒูู ุงูุงุณุชุฌุงุจุฉ/ุทูู ุงูุฎูุท/ุฒุงููุฉ ุงูุงูุชุฒุงุฒโฆ",
      },
      {
        id:"9",
        lesson:"1-2",
        group:"chapter",
        text:"ุญูููู 750 MHz ุฅูู kHz.",
        hint:"1 MHz = 1000 kHz.",
        solution:"750 MHz = 750,000 kHz.",
      },
      {
        id:"10",
        lesson:"1-2",
        group:"chapter",
        text:"ุญูููู 5201 cm ุฅูู km.",
        hint:"ุญูููู ุฅูู m ุซู ุฅูู km.",
        solution:"5201 cm = 52.01 m = 0.05201 km.",
      },
      {
        id:"11",
        lesson:"1-2",
        group:"chapter",
        text:"ูู ุซุงููุฉ ูู ุณูุฉ ูุจูุณุฉ (366 ููููุง)ุ",
        hint:"ุงุถุฑุจู 366ร24ร60ร60.",
        solution:"31,622,400 s.",
      },
      {
        id:"12",
        lesson:"1-2",
        group:"chapter",
        text:"ุญูููู 5.30 m/s ุฅูู km/h.",
        hint:"ููุชุญููู ูู m/s ุฅูู km/h ุงุถุฑุจู ูู 3.6.",
        solution:"5.30ร3.6 = 19.08 โ 19.1 km/h.",
      },
      {
        id:"13",
        lesson:"1-2",
        group:"chapter",
        text:"ุงุญุณุจู ููุฉ ูุบูุงุทูุณูุฉ ุนูู ุจุฑูุชูู ูุชุญุฑู ุนููุฏููุง ูู ูุฌุงู: ุงุณุชุฎุฏูู F = B q v.",
        hint:"ุนูุถู B ู q=1.60ร10โปยนโน C ู v ุซู ุงุถุฑุจู.",
        solution:"F = B q v (ูุซุงู: 4.5ร1.6e-19ร2.4e5 โ 1.73ร10โปยนยณ N).",
      },
      {
        id:"14",
        lesson:"1-2",
        group:"chapter",
        text:"ูุณุทุฑุฉ ูุง ูุจุฏุฃ ุตูุฑูุง ูู ุงูุญุงูุฉ. ูุง ุฃุซุฑ ุฐูู ุนูู ุงูููุงุณุ",
        hint:"ูุฐุง ูุณูู ุฎุทุฃ ุตูุฑู.",
        solution:"ููุชุฌ ุงูุญุฑุงู ุซุงุจุช ูู ุฌููุน ุงูููุงุณุงุชุ ูุฌุจ ุทุฑุญ/ุฅุถุงูุฉ ุฅุฒุงุญุฉ ุงูุตูุฑ ูุชุตุญูุญ ุงููุฑุงุกุฉ.",
      },
      {
        id:"15",
        lesson:"1-2",
        group:"chapter",
        text:"ูุงุฑูู ูููุฑููุชุฑ ุณูุฆ ุงููุนุงูุฑุฉ ุจูุณุทุฑุฉ ุฌูุฏุฉ ูู ุญูุซ ุงูุฏูุฉ ูุงูุถุจุท.",
        hint:"ุงูุฏูุฉ = ุตุบุฑ ุชุฏุฑูุฌ ุงูุฌูุงุฒุ ุงูุถุจุท = ูุฑุจู ูู ุงููููุฉ ุงูุญููููุฉ.",
        solution:"ุงููููุฑููุชุฑ ุฃุฏู (ุชุฏุฑุฌ ุฃุตุบุฑ) ูููู ุฃูู ุถุจุทูุง ุจุณุจุจ ุณูุก ุงููุนุงูุฑุฉุ ุงููุณุทุฑุฉ ุฃูู ุฏูุฉ ููููุง ูุฏ ุชููู ุฃุถุจุท ุฅู ูุงูุช ูุนุงูุฑุฉ.",
      },
      {
        id:"16",
        lesson:"1-2",
        group:"chapter",
        text:"ูู ุงุฎุชูุงู ุฒุงููุฉ ุงููุธุฑ ูุคุซุฑ ุนูู ุงูููุงุณุ ูุถุญู.",
        hint:"ูุฐุง ุฎุทุฃ ุงุฎุชูุงู ุงูููุธุฑ (Parallax).",
        solution:"ูุนูุ ุชุบููุฑ ุฒุงููุฉ ุงููุธุฑ ูุบููุฑ ุงููุฑุงุกุฉ ูุชูู ุงูุฏูุฉ/ูุชุฏููุฑ ุงูุถุจุท. ุงูุญู: ุงููุธุฑ ุนููุฏููุง ุนูู ุงูุชุฏุฑูุฌ.",
      },
      {
        id:"17",
        lesson:"1-2",
        group:"chapter",
        text:"ุทูู ุตุฏููู ููุชูุจ 182 cm. ูุง ุฏูุฉ ูุฐุง ุงูููุงุณุ",
        hint:"ููุฑู: ุฃูุฑุจ 1 cm ูุนูู ยฑ ูุตู ุชุฏุฑูุฌ.",
        solution:"ุบุงูุจูุง ููุงุณ ูุฃูุฑุจ 1 cm โ ุนุฏู ูููู โ ยฑ0.5 cm.",
      },
      {
        id:"18",
        lesson:"1-2",
        group:"chapter",
        text:"ุตูุฏูู ุฃุจุนุงุฏู 19.2 cm ู20.3 cm ู18.1 cm: ุงุญุณุจู ุงูุญุฌูุ ุซู ุงุฑุชูุงุน 12 ุตูุฏูููุง ููู ุจุนุถ.",
        hint:"V = LWHุ ูุงุฑุชูุงุน 12 = 12รุงูุงุฑุชูุงุน.",
        solution:"V โ 19.2ร20.3ร18.1 = 7.05ร10ยณ cmยณ. ูุงุฑุชูุงุน 12 ุตูุฏูููุง = 217.2 cm.",
      },
      {
        id:"19",
        lesson:"1-2",
        group:"chapter",
        text:"ูููุณ ุฒูู 7 ุฏูุฑุงุช ููุงู ุงููุชูุณุท ูุนุทู T=65.414 s ูุฒูู ุงูููุงุณ ูุฃูุฑุจ 0.1 s. ููู ุชูุชุจูู ุงููุชูุฌุฉ ุจุฏูุฉ ููุงุณุจุฉุ",
        hint:"ูุฒูุนู ุนุฏู ุงููููู: ฮT โ 0.1/7.",
        solution:"ฮT โ 0.014 s โ T โ 65.41 ยฑ 0.01 s (ุชูุฑูุจ ููุงุณุจ).",
      },
      {
        id:"20",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุฑุชูุจู ุฎุทูุงุช ุงูุทุฑููุฉ ุงูุนูููุฉ.",
        hint:"ุงูุชุจู: ุณุคุงูโูุฑุถูุฉโุชุฌุฑุจุฉโุชุญูููโุงุณุชูุชุงุฌโุชูุฑุงุฑ.",
        solution:"ููุงุญุธุฉ/ุณุคุงู โ ูุฑุถูุฉ โ ุชุฌุฑุจุฉ ูุงุฎุชุจุงุฑ โ ุชุญููู ุจูุงูุงุช โ ุงุณุชูุชุงุฌ โ ุชุนุฏูู/ุชูุฑุงุฑ.",
      },
      {
        id:"21",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุนุฑููู ุงูุทุฑููุฉ ุงูุนูููุฉ ุจุงุฎุชุตุงุฑ.",
        hint:"ูููุงุช ููุชุงุญูุฉ: ููุงุญุธุฉุ ูุฑุถูุฉุ ุงุฎุชุจุงุฑุ ุชุญููู.",
        solution:"ูููุฌ ููุธู ูุงูุชุณุงุจ ุงููุนุฑูุฉ ูุนุชูุฏ ุนูู ุงูููุงุญุธุฉ ูุตูุงุบุฉ ูุฑุถูุงุช ูุงุฎุชุจุงุฑูุง ุจุงูุชุฌุฑุจุฉ ูุชุญููู ุงููุชุงุฆุฌ.",
      },
      {
        id:"22",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ููุงุฐุง ุชุนุฏ ุงูุฑูุงุถูุงุช ูููุฉ ูู ุงูููุฒูุงุกุ",
        hint:"ูุฃููุง ูุบุฉ ุงูุนูุงูุงุช ุจูู ุงููููุงุช.",
        solution:"ูุฃููุง ุชุตู ุงูุนูุงูุงุช ุจุฏูุฉุ ูุชุญููู ุงูุธูุงูุฑ ุฅูู ููุงุฐุฌ ูููู ุญุณุงุจูุง ูุงูุชูุจุค ุจูุง.",
      },
      {
        id:"23",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจุงููุธุงู ุงูุฏููู ูููุญุฏุงุช SIุ",
        hint:"ูุธุงู ููุญูุฏ ูููุญุฏุงุช.",
        solution:"ูุธุงู ุนุงููู ูุชูุญูุฏ ุงูููุงุณุงุช ูุงููุญุฏุงุช ูุชุณููู ุงูุชูุงุตู ูุงูุชุญูููุงุช.",
      },
      {
        id:"24",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุญูููู/ุณููู: 100 m ู 1000 m ู 1 m ุจูุญุฏุงุช ููุงุณุจุฉ.",
        hint:"ุงุณุชุฎุฏูู ุจุงุฏุฆุงุช: hecto, kilo.",
        solution:"100 m = 1 hm (ุฃู 0.1 km)ุ 1000 m = 1 kmุ 1 m = 1 m.",
      },
      {
        id:"25",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูู ุชุฌุฑุจุฉ ุชุฑุจุท ุญุฌู ุจุงููู ุจุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ: ุญุฏุฏู ุงููุชุบูุฑ ุงููุณุชูู ูุงูุชุงุจุน.",
        hint:"ุงููุณุชูู ูู ูุง ุชุบููุฑููู ุนูุฏูุง.",
        solution:"ุงููุณุชูู: ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ. ุงูุชุงุจุน: ุญุฌู ุงูุจุงููู.",
      },
      {
        id:"26",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูู ุฑุณู ุจูุงูู ููุธูุฑ ุฃู ุงููุชุบูุฑ ุงูุชุงุจุน ูุฒูุฏ ูุน ุงููุณุชูู ููู ููุณ ุฎุทููุง: ูุง ููุน ุงูุนูุงูุฉุ",
        hint:"ุงูุธุฑู ูู ูู ุฎุท ูุณุชููู ุฃู ููุญูู.",
        solution:"ุนูุงูุฉ ุทุฑุฏูุฉ ุบูุฑ ุฎุทูุฉ (ูุนุฏู ุงูุฒูุงุฏุฉ ููุณ ุซุงุจุชูุง).",
      },
      {
        id:"27",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูู F = m vยฒ / r: ุตููู ุงุนุชูุงุฏ F ุนูู r ู m ู v.",
        hint:"ุงุณุชุฎุฏูู ุงูุชูุงุณุจุงุช.",
        solution:"ูุน r: ุนูุณูุฉุ ูุน m: ุทุฑุฏูุฉุ ูุน v: ุทุฑุฏูุฉ ุชุฑุจูุนูุฉ (โ vยฒ).",
      },
      {
        id:"28",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูููุฒู ุจูู ูุงููู ููุธุฑูุฉุ ูุจูู ูุฑุถูุฉ ููุธุฑูุฉ.",
        hint:"ุงููุงููู ูุตูุ ุงููุธุฑูุฉ ุชูุณูุฑ.",
        solution:"ุงููุงููู: ูุตู ุนูุงูุฉ/ููุท. ุงููุธุฑูุฉ: ุชูุณูุฑ ูุงุณุน ูุฏุนูู ุจุฃุฏูุฉ. ุงููุฑุถูุฉ: ุชููุน ูุงุจู ููุงุฎุชุจุงุฑุ ุงููุธุฑูุฉ: ุชูุณูุฑ ุฑุงุณุฎ.",
      },
      {
        id:"29",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูุง ูุญุฏุฉ ุงููุซุงูุฉ ูู SIุ",
        hint:"ุงููุซุงูุฉ = ูุชูุฉ/ุญุฌู.",
        solution:"kg/mยณ.",
      },
      {
        id:"30",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุนูุฏ ููุงุณูู ููุณุฑุนุฉ ูุน ุนุฏู ูููู ูุฎุชูู: ุฃูููุง ุฃุฏู (precision) ูุฃูููุง ุฃุถุจุท (accuracy)ุ",
        hint:"ุงูุฃุฏู: ุฃุตุบุฑ ยฑ. ุงูุฃุถุจุท: ุงูุฃูุฑุจ ูููููุฉ ุงูููุจููุฉ.",
        solution:"ุงูุฃุฏู: ุงูุฃุตุบุฑ ุนุฏู ูููู. ุงูุฃุถุจุท: ุงูุฃูุฑุจ ูููููุฉ ุงูููุงุณูุฉ (ุญุชู ูู ูุงู ยฑ ุฃูุจุฑ).",
      },
      {
        id:"31",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ููู ุชููุณูู ุทูู ุฌุณู ุฅุฐุง ูู ูุจุฏุฃ ุนูุฏ ุงูุตูุฑ ุนูู ุงููุณุทุฑุฉุ",
        hint:"ุงูุทูู = ูุฑุงุกุฉ ุงูููุงูุฉ โ ูุฑุงุกุฉ ุงูุจุฏุงูุฉ.",
        solution:"ุฎุฐู ูุฑุงุกุชูู (ุจุฏุงูุฉ/ููุงูุฉ) ุซู ุงุทุฑุญู: L = xโ โ xโ ูุน ุฐูุฑ ุนุฏู ุงููููู.",
      },
      {
        id:"32",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุฌุณู ูุชูุชู 41.63 kg: ุงุญุณุจู ูุฒูู. ุซู ุฅุฐุง ูุงู ุงููุฒู 632 N ุงุญุณุจู ุงููุชูุฉ.",
        hint:"W = mg ู m = W/g.",
        solution:"W โ 41.63ร9.80 = 408 N. ู m โ 632/9.80 = 64.5 kg.",
      },
      {
        id:"33",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุชุญููู ูู ุงููุญุฏุงุช ูู (0.55 kg)(2.1 m/s)/(9.80 m/sยฒ): ูุง ูุญุฏุฉ ุงููุงุชุฌุ ููู ูู ุถุบุทุ",
        hint:"ุจุณูุทู ุงููุญุฏุงุช: (kgยทm/s)/(m/sยฒ)=kgยทs.",
        solution:"ุงููุงุชุฌ ุจูุญุฏุฉ kgยทsุ ููุณุช ูุญุฏุฉ ุถุบุท (Pa = N/mยฒ).",
      },
      {
        id:"34",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุญูููู ุฅูู ุงููุชุฑ: 42.3 cmุ 6.2 pmุ 21 kmุ 0.023 mmุ 214 ฮผmุ 57 nm.",
        hint:"ุงุณุชุฎุฏูู ุงูุจุงุฏุฆุงุช ู 1 cm=1e-2 mโฆ",
        solution:"0.423 mุ 6.2ร10โปยนยฒ mุ 2.10ร10โด mุ 2.3ร10โปโต mุ 2.14ร10โปโด mุ 5.7ร10โปโธ m.",
      },
      {
        id:"35",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูุชูุฉ ุฅูุงุก ูุน ูุงุก 51.8 kg ููุชูุฉ ุงูุฅูุงุก 3.64 kg: ูุง ูุชูุฉ ุงููุงุกุ",
        hint:"ุงุทุฑุญู ูุชูุฉ ุงูุฅูุงุก ุงููุงุฑุบ.",
        solution:"m ุงููุงุก = 51.8 โ 3.64 = 48.16 kg.",
      },
      {
        id:"36",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูู ูุฑุงุกุฉ ููุฒุงู ูุธูุฑ ููุฒูุฉ ุนุดุฑูุฉ ูุงุญุฏุฉ ุจุงูุฌุฑุงู: ูุง ุฃุตุบุฑ ุชุฏุฑูุฌุ",
        hint:"ุฅุฐุง ูุนุฑุถ 0.1 g ููุฐู ุงูุฏูุฉ.",
        solution:"ุฃุตุบุฑ ุชุฏุฑูุฌ ุชูุฑูุจูุง 0.1 g (ูุนุฏู ูููู ุชูุฑูุจู ยฑ0.05 ุฅูู ยฑ0.1 g).",
      },
      {
        id:"37",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุงูุฑุฆู ูููุฉ ุชุฏุฑูุฌ ูู ุฌูุงุฒ ููุงุณ (ุญุณุจ ุงูุดูู ูู ูุชุงุจู) ูุน ุชูุฏูุฑ ุนุฏู ุงููููู.",
        hint:"ุงูุฑุฆู ุฃูุฑุจ ุชุฏุฑูุฌ ุซู ยฑ ูุตูู.",
        solution:"ุงูุชุจู ุงููุฑุงุกุฉ ูุฃูุฑุจ ุชุฏุฑูุฌ ูุงุฐูุฑู ุนุฏู ูููู โ ูุตู ุฃุตุบุฑ ุชุฏุฑูุฌ.",
      },
      {
        id:"38",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ูู ุฑุณู ูุชูุฉ-ุญุฌู ูุซูุงุซ ููุงุฏ A,B,C: ุงุณุชูุชุฌู ุงููุชูุฉ ุนูุฏ ุญุฌู ูุนููุ ูุงูุญุฌู ุนูุฏ ูุชูุฉ ูุนููุฉุ ููุง ุงูุฐู ููุซูู ููู ุงูุฎุท.",
        hint:"ุงูููู = ฮm/ฮV = ุงููุซุงูุฉ.",
        solution:"ุงูุฑุฆู ุงูููู ูู ุงูุฑุณู. ููู ุงูุฎุท ููุซู ุงููุซุงูุฉ (ูููุง ุฒุงุฏ ุงูููู ุฒุงุฏุช ุงููุซุงูุฉ).",
      },
      {
        id:"39",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุชุฌุฑุจุฉ ุณุญุจ ุฌุณู ููุณุงูุฉ ูุฎุชููุฉ ุฑุบู ููุณ ุงููุชูุฉ: ูุง ุงูุณุจุจ ุงููุญุชููุ ูููู ุชุชุญููููุ",
        hint:"ููุฑู ุจุงูุงุญุชูุงู ูููุน ุงูุณุทุญ.",
        solution:"ุงูุณุจุจ ุงุฎุชูุงู ุงูุงุญุชูุงู/ุงูุณุทุญ. ููุชุญูู: ุซุจุชู ุงูููุฉ ูุงููุชูุฉ ูุบููุฑู ุงูุณุทุญ ููุฑุฑู ุงูููุงุณ.",
      },
      {
        id:"40",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุฅุฐุง ูุงู ุนุฏุฏ ุงููุทุฑุงุช 1.7ร10ยฒยน ููุชุจุฎุฑ 10โถ ูุทุฑุฉ/ุซ: ุงุญุณุจู ุงูุฒูู ุจุงูุณููุงุช.",
        hint:"t = N/ุงููุนุฏู ุซู ุญูููู ููุณููุงุช.",
        solution:"t = 1.7ร10ยนโต s โ 5.4ร10โท ุณูุฉ โ 54 ููููู ุณูุฉ.",
      },
      {
        id:"41",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุญูุถ ุฃุจุนุงุฏู 1.4 m ร 0.600 m ร 0.340 m. ุงุญุณุจู ูุชูุฉ ุงููุงุก ุนูุฏ ฯ=1000 kg/mยณ.",
        hint:"ุงุญุณุจู ุงูุญุฌู ุซู m=ฯV.",
        solution:"V=0.2856 mยณ โ m=285.6 kg โ 286 kg.",
      },
      {
        id:"42",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุตููู ุชุฌุฑุจุฉ ูููุงุณ ุงุฑุชูุงุน ุงุฑุชุฏุงุฏ ูุฑุฉ ุจุนุฏ ุฅุณูุงุทูุง.",
        hint:"ุซุจุชู ูู ุดูุก ุฅูุง ูุชุบูุฑ ูุงุญุฏ ููุฑุฑู ุงูููุงุณ.",
        solution:"ุญุฏุฏู ุงููุชุบูุฑ (ุงูุณุทุญ/ุงูุงุฑุชูุงุน)ุ ุซุจุชู ุงููุฑุฉ ูุงูุทุฑููุฉุ ูุฑุฑู 5 ูุฑุงุชุ ุงุณุชุฎุฏูู ูุณุทุฑุฉ/ุชุตููุฑ ุจุทูุกุ ุงุญุณุจู ุงููุชูุณุท ูุงูุงูุญุฑุงู.",
      },
      {
        id:"43",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ุงูุชุจู ููุฑุฉ ูุตูุฑุฉ ุนู ุชุทูุฑ ุงูููุฒูุงุก ูุฏูุฑ ุงูุทุฑููุฉ ุงูุนูููุฉ.",
        hint:"ุงุฐูุฑู: ููุงูููโูุธุฑูุงุชโุชุทุจููุงุชโุฃุฏูุงุช ููุงุณ.",
        solution:"ููุฑุฉ ุชุฑุจุท ุชุทูุฑ ุงูููุฒูุงุก ุนุจุฑ ุงูุชุงุฑูุฎ ุจุงูุทุฑููุฉ ุงูุนูููุฉ: ููุงุญุธุฉโูุฑุถูุฉโุชุฌุฑุจุฉโูุงููู/ูุธุฑูุฉ ูุชุทุจููุงุช ุชูููุฉ.",
      },
      {
        id:"44",
        lesson:"ch1_eval",
        group:"chapter",
        text:"ููู ุชุญุณูููู ุฏูุฉ ููุงุณ ุฒูู ุณููุท ุฌุณูุ",
        hint:"ููููู ุฎุทุฃ ุฑุฏ ุงููุนู ููุฑุฑู.",
        solution:"ุงุณุชุฎุฏูู ุจูุงุจุฉ ุถูุฆูุฉ/ุญุณุงุณ ุฃู ุชุตููุฑ ุจุทูุกุ ูุฑุฑู ูุฎุฐู ูุชูุณุทูุงุ ุฒูุฏู ุงููุณุงูุฉ ููููู ุชุฃุซูุฑ ุงูููุงุก.",
      },
      {
        id:"MC-1",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 1): ุชุญุฏูุฏ ุฃู ููุงุณ ุฃูุซุฑ ุถุจุทูุง ุนูุฏ ูุฌูุฏ ยฑ (ุนุฏู ูููู) ูุฎุชูู.",
        hint:"ุงูุฃุตุบุฑ ยฑ ูู ุงูุฃูุซุฑ ุถุจุทูุง.",
        solution:"ุงูุฃูุซุฑ ุถุจุทูุง ูู ุฐู ยฑ ุงูุฃุตุบุฑ (ูุซู ยฑ40 ุฃุฏู ูู ยฑ50 ูู ูุงุญูุฉ ุงูุถุจุท/precision).",
      },
      {
        id:"MC-2",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 2): ุฃู ูููุฉ ุชูุงูุฆ 86.2 cm ุจูุญุฏุฉ ุฃุฎุฑูุ",
        hint:"ุญูููู ุฅูู m ุซู ุฅูู km.",
        solution:"86.2 cm = 0.862 m = 8.62ร10โปโด km.",
      },
      {
        id:"MC-3",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 3): ุฅุฐุง ูุงูุช ุงููุณุงูุฉ ุจุงููููููุชุฑ ูุงูุณุฑุนุฉ ุจุงููุชุฑ/ุซุ ููู ุชุญุณุจ ุงูุฒูู ุจุงูุซูุงููุ",
        hint:"ุญูููู km ุฅูู m ุซู ุงูุณูู ุนูู ุงูุณุฑุนุฉ.",
        solution:"t(s)= (d_kmร1000)/v(m/s).",
      },
      {
        id:"MC-4",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 4): ุฃุนูุฏู ุชุฑุชูุจ ูุนุงุฏูุฉ ุงููุซุงูุฉ D=m/V ูุฅูุฌุงุฏ V.",
        hint:"ุงูุณูู m ุนูู D.",
        solution:"V = m/D.",
      },
      {
        id:"MC-5",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 5): ุงุญุณุจู ููู ุฎุท ูุณุชููู ูู ููุทุชูู ูู ุงูุฑุณู.",
        hint:"ุงูููู = ฮy/ฮx.",
        solution:"ูุซุงู: ูู (0,0) ุฅูู (12,3): ุงูููู=3/12=0.25.",
      },
      {
        id:"MC-6",
        lesson:"ch1_exam",
        group:"scaled",
        text:"ุงูุงุฎุชุจุงุฑ ุงููููู (ุณุคุงู 6): ูุณุฃูุฉ ููุฉ ููุชูุฉ: ุงุณุชูุชุฌู a ูู F ู m ูุทุจููู ูุน ุชุญููู g ุฅูู kg.",
        hint:"a = F/mุ ู 1 kg = 1000 g.",
        solution:"ุฅุฐุง F=2.7 N ู m=350 g=0.350 kg โ a=2.7/0.350=7.7 m/sยฒ.",
      },
    ],
    ch2: [
      {
        id:"1",
        lesson:"2-1",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจุงูุญุฑูุฉ ูู ุงูููุฒูุงุกุ",
        hint:"ุฑูุฒู ุนูู ุชุบููุฑ ุงููููุน ูุน ุงูุฒูู ูููุทุฉ ูุฑุฌุนูุฉ.",
        solution:"ุงูุญุฑูุฉ ูู ุชุบููุฑ ูููุน ุฌุณู ุจุงููุณุจุฉ ูููุทุฉ ูุฑุฌุนูุฉ ูุน ูุฑูุฑ ุงูุฒูู. ุฅุฐุง ูู ูุชุบูุฑ ุงููููุน ูุงูุฌุณู ุณุงูู.",
      },
      {
        id:"2",
        lesson:"2-1",
        group:"chapter",
        text:"ููุงุฐุง ูุญุชุงุฌ ููุทุฉ ูุฑุฌุนูุฉ ููุตู ุงูุญุฑูุฉุ",
        hint:"ุชุฎููู ููุณ ุงูุฌุณู ุฏุงุฎู ุณูุงุฑุฉ ุฃู ุฎุงุฑุฌูุง.",
        solution:"ูุฃู ุงูุญูู ุนูู ุงูุฌุณู ูุชุญุฑู/ุณุงูู ูุนุชูุฏ ุนูู ุงููุฑุฌุนุ ูุฏ ูููู ุณุงูููุง ุจุงููุณุจุฉ ูุฑุงูุจ ุงูุณูุงุฑุฉ ููุชุญุฑููุง ุจุงููุณุจุฉ ููุทุฑูู.",
      },
      {
        id:"3",
        lesson:"2-1",
        group:"chapter",
        text:"ูุง ูุงุฆุฏุฉ ุงูุตูุฑ ุงููุชุชุงุจุนุฉ (ุงูุชุตููุฑ ุงููุชุชุงุจุน) ูู ุฏุฑุงุณุฉ ุงูุญุฑูุฉุ",
        hint:"ุงูููุฑุฉ: ููุทุงุช ุจุฒูู ูุชุณุงูู.",
        solution:"ุชุนุทู ููุงูุน ุงูุฌุณู ุนูุฏ ุฃุฒููุฉ ูุชุณุงููุฉุ ููู ุชุจุงุนุฏ ุงูููุทุงุช ูุณุชูุชุฌ ุงูุณุฑุนุฉ: ุชุจุงุนุฏ ุฃูุจุฑ ูุนูู ุญุฑูุฉ ุฃุณุฑุน.",
      },
      {
        id:"4",
        lesson:"2-1",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจุงููุฎุทุท ุงูุชูุถูุญู ููุญุฑูุฉุ",
        hint:"ูู ุชูุซูู ูุจุณูุท ูููุงุถุน ุงูุฌุณู.",
        solution:"ูู ุฑุณู ููุถุญ ููุงุถุน ุงูุฌุณู ูู ุฃุฒููุฉ ูุชุณุงููุฉ (ููุงุท/ุฃุณูู) ููุณูู ูุตู ุงุชุฌุงู ุงูุญุฑูุฉ ูุชุบูุฑ ุณุฑุนุชูุง.",
      },
      {
        id:"5",
        lesson:"2-1",
        group:"chapter",
        text:"ูุง ูููุฐุฌ ุงูุฌุณูู ุงูููุทู ูููุงุฐุง ููุณุชุฎุฏูุ",
        hint:"ูุชุฌุงูู ุญุฌู ุงูุฌุณู ููุฑูุฒ ุนูู ูุฑูุฒู.",
        solution:"ุชูุซูู ุงูุฌุณู ูููุทุฉ (ุนุงุฏุฉ ูุฑูุฒ ุงููุชูุฉ) ูุชุจุณูุท ุชุญููู ุงูุญุฑูุฉุ ููุชู ุจุงููููุน ูุงูุฒูู ุจุฏู ุงูุชูุงุตูู ุงูุดูููุฉ.",
      },
      {
        id:"6",
        lesson:"2-1",
        group:"chapter",
        text:"ุฅุฐุง ุชูุงุฑุจุช ุงูููุงุท ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทู ููุงุฐุง ูุนูู ุฐููุ",
        hint:"ุงููุณุงูุฉ ุงูููุทูุนุฉ ูู ููุณ ุงูุฒูู.",
        solution:"ูุนูู ุฃู ุงูุฌุณู ููุทุน ูุณุงูุฉ ุตุบูุฑุฉ ูู ูู ูุชุฑุฉ ุฒูููุฉ ูุชุณุงููุฉ โ ุณุฑุนุชู ุตุบูุฑุฉ.",
      },
      {
        id:"7",
        lesson:"2-1",
        group:"chapter",
        text:"ุฅุฐุง ุชุจุงุนุฏุช ุงูููุงุท ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทู ููุงุฐุง ูุนูู ุฐููุ",
        hint:"ูุงุฑู ุงููุณุงูุงุช ุจูู ุงูููุงุท.",
        solution:"ูุนูู ุฃู ุงูุฌุณู ููุทุน ูุณุงูุฉ ูุจูุฑุฉ ูู ูู ูุชุฑุฉ ุฒูููุฉ ูุชุณุงููุฉ โ ุณุฑุนุชู ูุจูุฑุฉ.",
      },
      {
        id:"8",
        lesson:"2-1",
        group:"chapter",
        text:"ููู ุชูููุฒูู ุงูุญุฑูุฉ ุงูููุชุธูุฉ ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทูุ",
        hint:"ูู ุงููุณุงูุงุช ุจูู ุงูููุงุท ูุชุณุงููุฉุ",
        solution:"ุฅุฐุง ูุงูุช ุงููุณุงูุงุช ุจูู ุงูููุงุท ูุชุณุงููุฉ ุฎูุงู ุฃุฒููุฉ ูุชุณุงููุฉ โ ุณุฑุนุฉ ุซุงุจุชุฉ โ ุญุฑูุฉ ููุชุธูุฉ.",
      },
      {
        id:"9",
        lesson:"2-1",
        group:"chapter",
        text:"ููู ุชูููุฒูู ุงูุญุฑูุฉ ุบูุฑ ุงูููุชุธูุฉ ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทูุ",
        hint:"ุชุบููุฑ ุงููุณุงูุงุช ุจูู ุงูููุงุท.",
        solution:"ุฅุฐุง ุชุบูุฑุช ุงููุณุงูุงุช ุจูู ุงูููุงุท (ุชุฒุฏุงุฏ/ุชูู) โ ุงูุณุฑุนุฉ ุชุชุบูุฑ โ ุญุฑูุฉ ุบูุฑ ููุชุธูุฉ.",
      },
      {
        id:"10",
        lesson:"2-1",
        group:"chapter",
        text:"ุตู ูููุฐุฌ ุฌุณูู ููุทู ูุณูุงุฑุฉ ุชุชุณุงุฑุน ููุฃูุงู.",
        hint:"ุงุจุฏุฆู ุจููุงุท ูุชูุงุฑุจุฉ ุซู ุฃุจุนุฏููุง ุชุฏุฑูุฌููุง.",
        solution:"ุชููู ุงูููุงุท ูู ุงูุจุฏุงูุฉ ูุชูุงุฑุจุฉ ุซู ุชุฒุฏุงุฏ ุงููุณุงูุฉ ุจูููุง ูุน ุงูุฒูู ูู ุงุชุฌุงู ุงูุญุฑูุฉุ ูุฃู ุงูุณุฑุนุฉ ุชุฒุฏุงุฏ.",
      },
      {
        id:"11",
        lesson:"2-1",
        group:"chapter",
        text:"ุตู ูููุฐุฌ ุฌุณูู ููุทู ูุณูุงุฑุฉ ุชุชุจุงุทุฃ.",
        hint:"ุงุจุฏุฆู ุจููุงุท ูุชุจุงุนุฏุฉ ุซู ูุฑูุจููุง.",
        solution:"ุชููู ุงูููุงุท ูู ุงูุจุฏุงูุฉ ูุชุจุงุนุฏุฉ ุซู ุชุชูุงุฑุจ ุชุฏุฑูุฌููุง ูุน ุงูุฒูู ูู ุงุชุฌุงู ุงูุญุฑูุฉุ ูุฃู ุงูุณุฑุนุฉ ุชูู.",
      },
      {
        id:"12",
        lesson:"2-1",
        group:"chapter",
        text:"ูู ูููู ูุฌุณููู ุฃู ูููู ูููุง ููุณ ุงูุญุฑูุฉุ ูุชูุ",
        hint:"ููุณ ุงูุงุชุฌุงู ูููุณ ุงูุชุบูุฑ ูู ุงููููุน.",
        solution:"ูุนู ุฅุฐุง ุชุญุฑูุง ุจุญูุซ ุชููู ููุงุถุนููุง ุชุชุบูุฑ ุจุงูุทุฑููุฉ ููุณูุง ูุน ุงูุฒูู (ููุณ ุงูุณุฑุนุฉ ูุงูุงุชุฌุงู ุจุงููุณุจุฉ ูููุณ ุงููุฑุฌุน).",
      },
      {
        id:"13",
        lesson:"2-1",
        group:"chapter",
        text:"ุงุฐูุฑู ูุซุงููุง ููุถุญ ูุณุจูุฉ ุงูุญุฑูุฉ.",
        hint:"ูุซุงู: ุฑุงูุจ ูู ุณูุงุฑุฉ.",
        solution:"ุงูุฑุงูุจ ุณุงูู ุจุงููุณุจุฉ ููุณูุงุฑุฉ ูููู ูุชุญุฑู ุจุงููุณุจุฉ ููุทุฑููุ ูุฃู ุงููุฑุฌุน ูุฎุชูู.",
      },
      {
        id:"14",
        lesson:"2-1",
        group:"chapter",
        text:"ููุงุฐุง ููุนุฏ ุชูุซูู ุงูุญุฑูุฉ ุฎุทูุฉ ูุจู ุฏุฑุงุณุฉ ุงูุณุฑุนุฉ ูุงูุชุณุงุฑุนุ",
        hint:"ุงูุณุฑุนุฉ ูุงูุชุณุงุฑุน ูุดุชูุฉ ูู ุชุบููุฑ ุงููููุน.",
        solution:"ูุฃู ุงูุณุฑุนุฉ ูุงูุชุณุงุฑุน ูุนุชูุฏูู ุนูู ููููุฉ ุชุบููุฑ ูููุน ุงูุฌุณู ูุน ุงูุฒููุ ููุง ุจุฏ ูู ุชูุซูู ุงูุญุฑูุฉ ุฃูููุง.",
      },
      {
        id:"15",
        lesson:"2-2",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจููุทุฉ ุงูุฃุตู ูู ุงููุธุงู ุงูุฅุญุฏุงุซูุ",
        hint:"ูู ุงูุตูุฑ ุงูุฐู ูููุณ ููู.",
        solution:"ูู ุงูููุทุฉ ุงูุชู ูููู ุนูุฏูุง ุงููููุน = 0 ูุชููุงุณ ุงูููุงูุน ุจุงููุณุจุฉ ููุง ููุฌุจูุง ุฃู ุณุงูุจูุง.",
      },
      {
        id:"16",
        lesson:"2-2",
        group:"chapter",
        text:"ูุง ูุนูู ุฃู ุงููููุน ุณุงูุจุ",
        hint:"ูุนุชูุฏ ุนูู ุงุชุฌุงู ุงูููุฌุจ ุงููุฎุชุงุฑ.",
        solution:"ูุนูู ุฃู ุงูุฌุณู ููุน ูู ุงูุฌูุฉ ุงูููุงุจูุฉ ููุงุชุฌุงู ุงูููุฌุจ ุจุงููุณุจุฉ ูููุทุฉ ุงูุฃุตู.",
      },
      {
        id:"17",
        lesson:"2-2",
        group:"chapter",
        text:"ุนุฑูู ุงูุฅุฒุงุญุฉ.",
        hint:"ูู ุงูุจุฏุงูุฉ ููููุงูุฉ ูุน ุงุชุฌุงู.",
        solution:"ุงูุฅุฒุงุญุฉ ูู ุงูุชุบูุฑ ูู ุงููููุน: ฮx = x_f โ x_i ููู ูููุฉ ูุชุฌูุฉ ููุง ููุฏุงุฑ ูุงุชุฌุงู.",
      },
      {
        id:"18",
        lesson:"2-2",
        group:"chapter",
        text:"ูุง ุงููุฑู ุจูู ุงููุณุงูุฉ ูุงูุฅุฒุงุญุฉุ",
        hint:"ุงููุณุงูุฉ ูุณุงุฑุ ุงูุฅุฒุงุญุฉ ูุฑู ูููุน.",
        solution:"ุงููุณุงูุฉ ุทูู ุงููุณุงุฑ ุงูููุทูุน (ููุงุณูุฉ)ุ ุฃูุง ุงูุฅุฒุงุญุฉ ููู ุฃูุตุฑ ุชุบูุฑ ูู ุงูุจุฏุงูุฉ ููููุงูุฉ ูุน ุงุชุฌุงู (ูุชุฌูุฉ).",
      },
      {
        id:"19",
        lesson:"2-2",
        group:"chapter",
        text:"ูู ูููู ุฃู ุชููู ุงูุฅุฒุงุญุฉ ุตูุฑูุง ูุงููุณุงูุฉ ุบูุฑ ุตูุฑุ ูุถูุญ.",
        hint:"ุญุงูุฉ ุฐูุงุจ ูุนูุฏุฉ.",
        solution:"ูุนู ุนูุฏ ุงูุนูุฏุฉ ูููุทุฉ ุงูุจุฏุงูุฉุ ุงูุฅุฒุงุญุฉ = 0 ูุฃู x_f = x_i ุจูููุง ุงููุณุงูุฉ > 0 ูุฃููุง ูุฌููุน ุงููุณุงุฑ.",
      },
      {
        id:"20",
        lesson:"2-2",
        group:"chapter",
        text:"ุฅุฐุง ุชุญุฑูุชู 5 km ุดุฑููุง ุซู 3 km ุบุฑุจูุงุ ูุง ุงูุฅุฒุงุญุฉุ",
        hint:"ุงุนุชุจุฑู ุงูุดุฑู ููุฌุจูุง.",
        solution:"ฮx = +5 โ 3 = +2 km (ุฃู 2 km ุดุฑููุง).",
      },
      {
        id:"21",
        lesson:"2-2",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจุงููุชุฑุฉ ุงูุฒูููุฉุ ูููู ุชูุญุณุจุ",
        hint:"ูุฑู ุจูู ุฒูููู.",
        solution:"ุงููุชุฑุฉ ุงูุฒูููุฉ ฮt = t_f โ t_i ูุชูุซู ูุฏุฉ ุงูุญุฑูุฉ.",
      },
      {
        id:"22",
        lesson:"2-2",
        group:"chapter",
        text:"ุตูููู: ุงูุฒููุ ุงููุณุงูุฉุ ุงูุฅุฒุงุญุฉ (ููุงุณูุฉ/ูุชุฌูุฉ).",
        hint:"ูุฌูุฏ ุงุชุฌุงูุ",
        solution:"ุงูุฒูู ูุงููุณุงูุฉ ูููุงุช ููุงุณูุฉุ ูุงูุฅุฒุงุญุฉ ูููุฉ ูุชุฌูุฉ.",
      },
      {
        id:"23",
        lesson:"2-2",
        group:"chapter",
        text:"ููุงุฐุง ุชุนุฏ ุงูุฅุฒุงุญุฉ ูููุฉ ูุชุฌูุฉุ",
        hint:"ูุฃููุง ุชุญุชุงุฌ ุงุชุฌุงู.",
        solution:"ูุฃู ูููุชูุง ุชุนุชูุฏ ุนูู ุงูุงุชุฌุงู (ุงูููุฌุจ/ุงูุณุงูุจ) ุฅุถุงูุฉ ุฅูู ุงูููุฏุงุฑ.",
      },
      {
        id:"24",
        lesson:"2-2",
        group:"chapter",
        text:"ูุชู ุชููู ุงูุฅุฒุงุญุฉ ููุฌุจุฉ ููุชู ุชููู ุณุงูุจุฉุ",
        hint:"ุจุงููุณุจุฉ ูุงุชุฌุงู ุงูููุฌุจ.",
        solution:"ุชููู ููุฌุจุฉ ุฅุฐุง ูุงู x_f ุฃูุจุฑ ูู x_i (ุงุชุฌุงู ููุฌุจ)ุ ูุณุงูุจุฉ ุฅุฐุง ูุงู x_f ุฃูู ูู x_i (ุงุชุฌุงู ุณุงูุจ).",
      },
      {
        id:"25",
        lesson:"2-2",
        group:"chapter",
        text:"ุฌุณู ุชุญุฑู ูู x= -2 m ุฅูู x= +6 m. ุงุญุณุจู ุงูุฅุฒุงุญุฉ.",
        hint:"ฮx = x_f โ x_i.",
        solution:"ฮx = 6 โ (โ2) = 8 m ุจุงุชุฌุงู ุงูููุฌุจ.",
      },
      {
        id:"26",
        lesson:"2-2",
        group:"chapter",
        text:"ุฌุณู ุชุญุฑู ูู x= 10 m ุฅูู x= 4 m. ุงุญุณุจู ุงูุฅุฒุงุญุฉ.",
        hint:"ูุฏ ุชููู ุณุงูุจุฉ.",
        solution:"ฮx = 4 โ 10 = โ6 m (6 m ุจุงุชุฌุงู ุงูุณุงูุจ).",
      },
      {
        id:"27",
        lesson:"2-2",
        group:"chapter",
        text:"ูู ุชุชุบูุฑ ุงูุฅุฒุงุญุฉ ุจุชุบูุฑ ุงููุณุงุฑุ",
        hint:"ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููุท.",
        solution:"ูุงุ ุงูุฅุฒุงุญุฉ ุชุนุชูุฏ ููุท ุนูู ููุถุนู ุงูุจุฏุงูุฉ ูุงูููุงูุฉุ ุจูููุง ุงููุณุงูุฉ ุชุชุบูุฑ ุจุชุบูุฑ ุงููุณุงุฑ.",
      },
      {
        id:"28",
        lesson:"2-2",
        group:"chapter",
        text:"ุฅุฐุง ุชุญุฑู ุฌุณู 2 m ุดุฑููุง ุซู 2 m ุบุฑุจูุงุ ุงุญุณุจู ุงููุณุงูุฉ ูุงูุฅุฒุงุญุฉ.",
        hint:"ุงุฌูุน ูููุณุงูุฉ ูุงุทุฑุญ ููุฅุฒุงุญุฉ.",
        solution:"ุงููุณุงูุฉ = 2+2=4 mุ ุงูุฅุฒุงุญุฉ = 0 m ูุฃูู ุนุงุฏ ูููุทุฉ ุงูุจุฏุงูุฉ.",
      },
      {
        id:"29",
        lesson:"2-3",
        group:"chapter",
        text:"ูุง ุงูุฐู ููุซูู ููุญูู (ุงููููุนโุงูุฒูู)ุ",
        hint:"ุงููููุน ููุงุจู ุงูุฒูู.",
        solution:"ููุซู ุชุบูุฑ ูููุน ุงูุฌุณู ูุน ุงูุฒููุ ุงููุญูุฑ ุงูุฃููู ููุฒูู ูุงูุนููุฏู ูููููุน.",
      },
      {
        id:"30",
        lesson:"2-3",
        group:"chapter",
        text:"ูุงุฐุง ููุซู ููู ููุญูู ุงููููุนโุงูุฒููุ",
        hint:"ฮx/ฮt.",
        solution:"ููุซู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุชูุณุทุฉ (ูุนูุฏ ููุทุฉ ููุซู ุงูุณุฑุนุฉ ุงููุญุธูุฉ ุฅุฐุง ุฃุฎุฐูุง ููุงุณูุง).",
      },
      {
        id:"31",
        lesson:"2-3",
        group:"chapter",
        text:"ูุงุฐุง ูุฏู ุงูุฎุท ุงููุณุชููู ุงููุงุฆู ูู ููุญูู ุงููููุนโุงูุฒููุ",
        hint:"ููู ุซุงุจุช.",
        solution:"ูุฏู ุนูู ุญุฑูุฉ ุจุณุฑุนุฉ ุซุงุจุชุฉ (ุณุฑุนุฉ ูุชุฌูุฉ ุซุงุจุชุฉ) ูุฃู ุงูููู ุซุงุจุช.",
      },
      {
        id:"32",
        lesson:"2-3",
        group:"chapter",
        text:"ูุงุฐุง ูุฏู ุงูุฎุท ุงูุฃููู ูู ููุญูู ุงููููุนโุงูุฒููุ",
        hint:"ุงููููุน ุซุงุจุช.",
        solution:"ูุฏู ุนูู ุงูุณูููุ ุงููููุน ูุง ูุชุบูุฑ ุจูุฑูุฑ ุงูุฒูู โ ุงูุณุฑุนุฉ = 0.",
      },
      {
        id:"33",
        lesson:"2-3",
        group:"chapter",
        text:"ุฅุฐุง ูุงู ููู ุงูููุญูู ุณุงูุจูุงุ ูุงุฐุง ูุนููุ",
        hint:"ุงุชุฌุงู ุงูุญุฑูุฉ.",
        solution:"ูุนูู ุฃู ุงูุฌุณู ูุชุญุฑู ูู ุงูุงุชุฌุงู ุงูุณุงูุจ (ุงููููุน ููู ูุน ุงูุฒูู).",
      },
      {
        id:"34",
        lesson:"2-3",
        group:"chapter",
        text:"ููุญูู ูููุนโุฒูู ูููู ูุฒุฏุงุฏ ูุน ุงูุฒูู: ูุงุฐุง ูุญุฏุซ ููุณุฑุนุฉุ",
        hint:"ุงูููู = ุงูุณุฑุนุฉ.",
        solution:"ุงูุณุฑุนุฉ ุชุฒุฏุงุฏ ูุน ุงูุฒูู (ุงูุฌุณู ูุชุณุงุฑุน ูู ุงูุงุชุฌุงู ุงูููุฌุจ).",
      },
      {
        id:"35",
        lesson:"2-3",
        group:"chapter",
        text:"ููุญูู ูููุนโุฒูู ูููู ููู ูุน ุงูุฒูู: ูุงุฐุง ูุญุฏุซ ููุณุฑุนุฉุ",
        hint:"ุงูููู ูุชูุงูุต.",
        solution:"ุงูุณุฑุนุฉ ุชูู ูุน ุงูุฒูู (ุชุชุจุงุทุฃ ุงูุญุฑูุฉ ูู ุงุชุฌุงู ุงูููุฌุจุ ุฃู ุชุชุณุงุฑุน ุณุงูุจูุง ุญุณุจ ุงูุฅุดุงุฑุฉ).",
      },
      {
        id:"36",
        lesson:"2-3",
        group:"chapter",
        text:"ููู ุชุญุณุจูู ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ ูู ููุญูู ุงููููุนโุงูุฒูู ุจูู ููุทุชููุ",
        hint:"ุงุญุณุจู ุงูููู ุจูู ุงูููุทุชูู.",
        solution:"v_avg = (x2โx1)/(t2โt1) ููู ููู ุงูุฎุท ุงููุงุตู ุจูู ุงูููุทุชูู.",
      },
      {
        id:"37",
        lesson:"2-3",
        group:"chapter",
        text:"ุฃู ุฌุณู ุฃุณุฑุน: ููุญูุงู ุฃูุซุฑ ููููุง ุฃู ุฃูู ููููุงุ",
        hint:"ูุงุฑูุฉ ุงูููู.",
        solution:"ุงูุฃูุซุฑ ููููุง (ูุฏุฑูุง ูุทูููุง) ุฃุณุฑุน ูุฃู |ฮx/ฮt| ุฃูุจุฑ.",
      },
      {
        id:"38",
        lesson:"2-3",
        group:"chapter",
        text:"ูุชู ุชููู ุงูุญุฑูุฉ ุบูุฑ ููุชุธูุฉ ุนูู ููุญูู ุงููููุนโุงูุฒููุ",
        hint:"ูู ุงูุฎุท ููุญููุ",
        solution:"ุนูุฏูุง ูููู ุงูููุญูู ุบูุฑ ุฎุทู (ุงูููู ูุชุบูุฑ ูุน ุงูุฒูู) โ ุงูุณุฑุนุฉ ุชุชุบูุฑ.",
      },
      {
        id:"39",
        lesson:"2-3",
        group:"chapter",
        text:"ุตู ููุญูู ูููุนโุฒูู ูุฌุณู ูุชุญุฑู ุจุณุฑุนุฉ ุซุงุจุชุฉ ูู ุงูุงุชุฌุงู ุงูุณุงูุจ.",
        hint:"ุฎุท ูุณุชููู ูููู ุณุงูุจ.",
        solution:"ูููู ุฎุทูุง ูุณุชููููุง ูุงุฆููุง ูุฃุณูู ูุน ุงูุฒูู (ููู ุซุงุจุช ูุณุงูุจ).",
      },
      {
        id:"40",
        lesson:"2-3",
        group:"chapter",
        text:"ุตู ููุญูู ูููุนโุฒูู ูุฌุณู ูุจุฏุฃ ุณุงูููุง ุซู ูุชุญุฑู ุจุณุฑุนุฉ ุซุงุจุชุฉ.",
        hint:"ุฌุฒุก ุฃููู ุซู ูุงุฆู.",
        solution:"ูู ุงูุจุฏุงูุฉ ุฎุท ุฃููู (ุณููู) ุซู ุฎุท ูุณุชููู ูุงุฆู (ุญุฑูุฉ ุจุณุฑุนุฉ ุซุงุจุชุฉ).",
      },
      {
        id:"41",
        lesson:"2-3",
        group:"chapter",
        text:"ููุงุฐุง ูุณุชุฎุฏู ุงูุฑุณูู ุงูุจูุงููุฉ ูู ูุตู ุงูุญุฑูุฉุ",
        hint:"ุชูุฎุต ูุนูููุงุช ูุซูุฑุฉ.",
        solution:"ูุฃููุง ุชูุธูุฑ ุงูุนูุงูุฉ ุจูู ุงููููุงุช ุจูุถูุญ ูุชุณุงุนุฏ ุนูู ุงุณุชูุชุงุฌ ุงูุณุฑุนุฉ ูุงูุงุชุฌุงู ูุชุบูุฑ ุงูุญุฑูุฉ.",
      },
      {
        id:"42",
        lesson:"2-3",
        group:"chapter",
        text:"ููู ุชุชูุจุฆูู ุจูุง ุณูุญุฏุซ ูุงุญููุง ูู ููุญูู ุงููููุนโุงูุฒููุ",
        hint:"ูุฏูู ุงูุงุชุฌุงู/ุงูููู.",
        solution:"ุจูุชุงุจุนุฉ ุงุชุฌุงู ุงูููู ูุชุบูุฑู: ููู ุซุงุจุช โ ุชุณุชูุฑ ุงูุณุฑุนุฉ ููุณูุงุ ูููู ูุชุฒุงูุฏ/ูุชูุงูุต โ ุชุณุงุฑุน/ุชุจุงุทุค.",
      },
      {
        id:"43",
        lesson:"2-4",
        group:"chapter",
        text:"ูุง ุงูููุตูุฏ ุจุงูุณุฑุนุฉ ุงููุชุฌูุฉุ",
        hint:"ูุนุฏู ุชุบูุฑ ุงูุฅุฒุงุญุฉ ูุงุชุฌุงููุง.",
        solution:"ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ูู ูุนุฏู ุชุบูุฑ ุงูุฅุฒุงุญุฉ ูุน ุงูุฒูู: v = ฮx/ฮt ููู ูููุฉ ูุชุฌูุฉ.",
      },
      {
        id:"44",
        lesson:"2-4",
        group:"chapter",
        text:"ูุง ุงููุฑู ุจูู ุงูุณุฑุนุฉ (ุงูููุงุณูุฉ) ูุงูุณุฑุนุฉ ุงููุชุฌูุฉุ",
        hint:"ุงูุงุชุฌุงู ูู ุงููุงุฑู.",
        solution:"ุงูุณุฑุนุฉ ุงูููุงุณูุฉ ููุฏุงุฑ ููุทุ ุฃูุง ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ูููุง ููุฏุงุฑ ูุงุชุฌุงู (ููุฌุจ/ุณุงูุจ ููู ุงููุญูุฑ).",
      },
      {
        id:"45",
        lesson:"2-4",
        group:"chapter",
        text:"ุณูุงุฑุฉ ูุทุนุช ุฅุฒุงุญุฉ 120 m ุฎูุงู 10 s. ุงุญุณุจู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุชูุณุทุฉ.",
        hint:"v = ฮx/ฮt.",
        solution:"v = 120/10 = 12 m/s (ุจุงุชุฌุงู ุงูุฅุฒุงุญุฉ).",
      },
      {
        id:"46",
        lesson:"2-4",
        group:"chapter",
        text:"ูุชู ุชููู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุณุงูุจุฉุ",
        hint:"ุนูุฏูุง ููู ุงููููุน.",
        solution:"ุนูุฏูุง ุชููู ุงูุฅุฒุงุญุฉ ุณุงูุจุฉ ุจุงููุณุจุฉ ููุงุชุฌุงู ุงูููุฌุจ ุงููุฎุชุงุฑ (ุงูุญุฑูุฉ ุจุงุชุฌุงู ุงูุณุงูุจ).",
      },
      {
        id:"47",
        lesson:"2-4",
        group:"chapter",
        text:"ุฅุฐุง ูุงูุช ุงูุณุฑุนุฉ ุงููุชุฌูุฉ = 0ุ ูู ูุนูู ุงูุฌุณู ุณุงูู ุฏุงุฆููุงุ",
        hint:"ูุฏ ูุนูุฏ ูููุทุฉ ุงูุจุฏุงูุฉ.",
        solution:"ููุณ ุฏุงุฆููุง: ูุฏ ูุชุญุฑู ุซู ูุนูุฏ ูููุทุฉ ุงูุจุฏุงูุฉ ุฎูุงู ุงููุชุฑุฉ ูุชููู ุงูุฅุฒุงุญุฉ ุตูุฑูุง ูุจุงูุชุงูู ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ ุตูุฑูุง.",
      },
      {
        id:"48",
        lesson:"2-4",
        group:"chapter",
        text:"ุฌุณู ุชุญุฑู 30 m ุดุฑููุง ุซู 30 m ุบุฑุจูุง ุฎูุงู 20 s. ุงุญุณุจู ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ ูุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุชูุณุทุฉ.",
        hint:"ุงููุณุงูุฉ vs ุงูุฅุฒุงุญุฉ.",
        solution:"ุงููุณุงูุฉ=60 m โ ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ=60/20=3 m/s. ุงูุฅุฒุงุญุฉ=0 โ ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุชูุณุทุฉ=0 m/s.",
      },
      {
        id:"49",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ูุงุฑูู ุจูู ุงููุณุงูุฉ ูุงูุฅุฒุงุญุฉ ูู ุญูุซ (ุงูููุน/ุงูุงุนุชูุงุฏ ุนูู ุงูุงุชุฌุงู).",
        hint:"ูุงุญุฏุฉ ููุงุณูุฉ ูุงูุฃุฎุฑู ูุชุฌูุฉ.",
        solution:"ุงููุณุงูุฉ ูููุฉ ููุงุณูุฉ ุชุนุชูุฏ ุนูู ุทูู ุงููุณุงุฑ ููุทุ ูุงูุฅุฒุงุญุฉ ูููุฉ ูุชุฌูุฉ ุชุนุชูุฏ ุนูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ูุงูุงุชุฌุงู.",
      },
      {
        id:"50",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ูุงุฑูู ุจูู ุงูุญุฑูุฉ ุงูููุชุธูุฉ ูุบูุฑ ุงูููุชุธูุฉ.",
        hint:"ูู ุงูุณุฑุนุฉ ุซุงุจุชุฉุ",
        solution:"ุงูููุชุธูุฉ ุณุฑุนุชูุง ุซุงุจุชุฉ (ููู ุซุงุจุช)ุ ูุบูุฑ ุงูููุชุธูุฉ ุณุฑุนุชูุง ุชุชุบูุฑ (ููู ูุชุบูุฑ).",
      },
      {
        id:"51",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ูุง ุงูุนูุงูุฉ ุจูู ููู ููุญูู ุงููููุนโุงูุฒูู ูุงูุณุฑุนุฉ ุงููุชุฌูุฉุ",
        hint:"ฮx/ฮt.",
        solution:"ููู ููุญูู ุงููููุนโุงูุฒูู ูุณุงูู ุงูุณุฑุนุฉ ุงููุชุฌูุฉุ ููู ุฃูุจุฑ ูุนูู ุณุฑุนุฉ ุฃูุจุฑ ูุงุชุฌุงูู ูุนุทู ุงูุฅุดุงุฑุฉ.",
      },
      {
        id:"52",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ููู ุชุนุฑููู ูู ููุญูู ุงููููุนโุงูุฒูู ุฃู ุงูุฌุณู ุณุงููุ",
        hint:"ุฎุท ุฃููู.",
        solution:"ุนูุฏูุง ูููู ุงูููุญูู ุฃููููุง ูุฃู ุงููููุน ุซุงุจุช ููุง ูุชุบูุฑ ูุน ุงูุฒูู.",
      },
      {
        id:"53",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ุฌุณู ุชุญุฑู ูู 0 m ุฅูู 8 m ุฎูุงู 4 s ุซู ุนุงุฏ ุฅูู 2 m ุฎูุงู 3 s. ุงุญุณุจู ุงูุฅุฒุงุญุฉ ุงููููุฉ ูุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุงููุชูุณุทุฉ ูููุชุฑุฉ ูููุง.",
        hint:"ุงุญุณุจู x_f โ x_i ูุงูุฒูู ุงูููู.",
        solution:"ุงูุฅุฒุงุญุฉ ุงููููุฉ = 2โ0=2 m. ุงูุฒูู ุงูููู = 7 s โ v_avg = 2/7 โ 0.29 m/s ุจุงุชุฌุงู ุงูููุฌุจ.",
      },
      {
        id:"54",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ุฌุณู ุชุญุฑู 6 m ุบุฑุจูุง ุซู 10 m ุดุฑููุง. ุงุญุณุจู ุงููุณุงูุฉ ูุงูุฅุฒุงุญุฉ (ุงุนุชุจุฑู ุงูุดุฑู ููุฌุจูุง).",
        hint:"ุงุฌูุน ูููุณุงูุฉ ูุงุทุฑุญ ููุฅุฒุงุญุฉ.",
        solution:"ุงููุณุงูุฉ=6+10=16 mุ ุงูุฅุฒุงุญุฉ=+10โ6=+4 m (4 m ุดุฑููุง).",
      },
      {
        id:"55",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ููุงุฐุง ูุง ูููู ุฃู ุชููู ูููุฉ ุงูุฅุฒุงุญุฉ ุฃูุจุฑ ูู ุงููุณุงูุฉุ",
        hint:"ุงูุฅุฒุงุญุฉ ุฃูุตุฑ ุทุฑูู.",
        solution:"ูุฃู ุงูุฅุฒุงุญุฉ ุชูุซู ุฃูุตุฑ ูุณุงูุฉ ูุณุชูููุฉ ุจูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉุ ุจูููุง ุงููุณุงูุฉ ูู ุทูู ุงููุณุงุฑ ููุฏ ูููู ุฃุทูู ุฃู ูุณุงูููุง.",
      },
      {
        id:"56",
        lesson:"ch2_eval",
        group:"chapter",
        text:"ุงุดุฑุญ ููู ุชุณุงุนุฏ ููุทุฉ ุงููุฑุฌุน ูุงุชุฌุงู ุงูููุฌุจ ูู ุชุญุฏูุฏ ุฅุดุงุฑุงุช (ุงููููุน/ุงูุฅุฒุงุญุฉ/ุงูุณุฑุนุฉ ุงููุชุฌูุฉ).",
        hint:"ุงูุฅุดุงุฑุฉ ูุฑุชุจุทุฉ ุจุงูุงุชุฌุงู ุงููุฎุชุงุฑ.",
        solution:"ุนูุฏ ุงุฎุชูุงุฑ ุงุชุฌุงู ููุฌุจุ ุชููู ุงูููุงูุน/ุงูุฅุฒุงุญุงุช/ุงูุณุฑุนุงุช ุจุงุชุฌุงูู ููุฌุจุฉุ ูุจุงูุงุชุฌุงู ุงููุนุงูุณ ุณุงูุจุฉุ ูุฐูู ูุชุบูุฑ ูุตู ุงูุญุฑูุฉ ุจุชุบูุฑ ุงููุฑุฌุน.",
      },
      {
        id:"1",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ููุซู ููู ููุญูู ุงููููุนโุงูุฒูู:",
        hint:"ุชุฐูุฑู ฮx/ฮt.",
        solution:"ุงูุณุฑุนุฉ ุงููุชุฌูุฉ.",
      },
      {
        id:"2",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ุฅุฐุง ูุงู ููุญูู ุงููููุนโุงูุฒูู ุฃููููุง ูุฅู ุงูุฌุณู:",
        hint:"ุงููููุน ูุง ูุชุบูุฑ.",
        solution:"ุณุงูู (ุณุฑุนุชู = 0).",
      },
      {
        id:"3",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ุฃู ุงููููุงุช ุงูุชุงููุฉ ูุชุฌูุฉุ (ุงููุณุงูุฉุ ุงูุฒููุ ุงูุฅุฒุงุญุฉุ ุงููุชูุฉ)",
        hint:"ูุฌูุฏ ุงุชุฌุงูุ",
        solution:"ุงูุฅุฒุงุญุฉ.",
      },
      {
        id:"4",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ุฌุณู ุนุงุฏ ูููุทุฉ ุงูุจุฏุงูุฉ ุจุนุฏ ุญุฑูุฉ. ุฃู ุนุจุงุฑุฉ ุตุญูุญุฉุ",
        hint:"ููุฑู ูู ุงูุฅุฒุงุญุฉ.",
        solution:"ุงูุฅุฒุงุญุฉ ุชุณุงูู ุตูุฑูุง.",
      },
      {
        id:"5",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ุชุจุงุนุฏ ุงูููุงุท ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทู ูุน ุฃุฒููุฉ ูุชุณุงููุฉ ูุฏู ุนูู:",
        hint:"ูุณุงูุฉ ุฃูุจุฑ ูู ููุณ ุงูุฒูู.",
        solution:"ุณุฑุนุฉ ุฃูุจุฑ.",
      },
      {
        id:"6",
        lesson:"ch2_exam",
        group:"scaled",
        text:"ุณุฑุนุฉ ูุชุฌูุฉ ุณุงูุจุฉ ุชุนูู ุฃู ุงูุฌุณู ูุชุญุฑู:",
        hint:"ุจุงููุณุจุฉ ููุงุชุฌุงู ุงูููุฌุจ ุงููุฎุชุงุฑ.",
        solution:"ูู ุงูุงุชุฌุงู ุงูุณุงูุจ.",
      }
    ]
  };

  let selectedQuestion = null;

  function getQuestionById(id){
    if(!id || !currentChapter) return null;
    const bank = questionBank[currentChapter.id] || [];
    return bank.find(x => x.id === id) || null;
  }

  function shortLabel(s, n=40){
    const t = (s || "").trim();
    return t.length <= n ? t : (t.slice(0,n-1) + "โฆ");
  }

  function refreshQuestionSelect(){
    if(!questionSelect) return;

    // ุฅุนุงุฏุฉ ุชููุฆุฉ ุงููุงุฆูุฉ
    questionSelect.innerHTML = "";

    // ุนูุตุฑ ุฅุฑุดุงุฏู ููุท (ุจุฏูู ุฎูุงุฑ "ุงูุชุจู ุณุคุงูู ุจููุณู" ุฏุงุฎู ุงูุฃุณุฆูุฉ ุงูุฌุงูุฒุฉ)
    const ph = document.createElement("option");
    ph.value = "";
    ph.textContent = "โ ุงุฎุชุงุฑู ุณุคุงููุง โ";
    ph.disabled = true;
    ph.selected = true;
    questionSelect.appendChild(ph);

    const bank = currentChapter ? (questionBank[currentChapter.id] || []) : [];
    if(!bank.length) return;

    const sel = lessonSelect ? lessonSelect.value : "";

    // ููุชุฑุฉ ุงูุฃุณุฆูุฉ ุจุญุณุจ ุงุฎุชูุงุฑ ุงูุฏุฑุณ/ุงูุชูููู/ุงูุงุฎุชุจุงุฑ ุงููููู (ุจุดูู ุนุงู ููู ุงููุตูู)
    let filtered = [];
    let label = "ุงูุฃุณุฆูุฉ";

    if(sel.endsWith("_exam")){
      filtered = bank.filter(q => q.group === "scaled" && q.lesson === sel);
      label = "ุงูุงุฎุชุจุงุฑ ุงููููู";
    }else if(sel.endsWith("_eval")){
      filtered = bank.filter(q => q.group === "chapter" && q.lesson === sel);
      label = "ุชูููู ุงููุตู";
    }else{
      filtered = bank.filter(q => q.group === "chapter" && q.lesson === sel);
      label = `ุฃุณุฆูุฉ ${getLessonName()}`;
    }

    if(!filtered.length) return;

    const og = document.createElement("optgroup");
    og.label = label;

    filtered.forEach(q => {
      const opt = document.createElement("option");
      opt.value = q.id;
      if(q.group === "scaled"){
        // ุนุฑุถ ุฑูู ุณุคุงู ุงูุงุฎุชุจุงุฑ ุจุดูู ูุงุถุญ
        const n = String(q.id).replace(/^MC2?-?/,"").replace(/^MC-/,"");
        opt.textContent = `ุงุฎุชุจุงุฑ ${n} โ ${shortLabel(q.text)}`;
      }else{
        opt.textContent = `ุณ${q.id} โ ${shortLabel(q.text)}`;
      }
      og.appendChild(opt);
    });

    questionSelect.appendChild(og);

    // ุงุฎุชูุงุฑ ุฃูู ุณุคุงู ุชููุงุฆููุง ููู ูุง ูุฑุฌุน ูููุถุน ุงููุฏูู
    questionSelect.value = filtered[0].id;
    selectedQuestion = getQuestionById(questionSelect.value);
    if(selectedQuestion){
      problemInput.value = selectedQuestion.text;
      aiOut.textContent = "โ ุชู ุงุฎุชูุงุฑ ุณุคุงู ุฌุงูุฒ. ุงุถุบุทู ยซุฃุนุทูู ุชูููุญยป ุฃู ยซุญูู ู ุงุดุฑุญยป.";
    }
  }



  function renderChapters(){
    chaptersGrid.innerHTML = "";
    chapters.forEach(ch => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="card-image" style="background-image:url('${ch.image}')"></div>
        <div class="card-content">
          <div>
            <div class="badge">๐ <span>${ch.id.toUpperCase()}</span></div>
            <h3>${ch.title}</h3>
            <p>${ch.focus}</p>
          </div>
          <div>
            <div class="sub">
              <div class="mini">โ๏ธ ูุณุงุฆู</div>
              <div class="mini">๐งช ูุนูู</div>
              <div class="mini">๐ ุฅุซุฑุงุกุงุช</div>
            </div>
            <p class="note">ุงุถุบุทู ููุฏุฎูู โ</p>
          </div>
        </div>
      `;
      card.addEventListener("click", () => openChapter(ch.id));
      chaptersGrid.appendChild(card);
    });
  }

  function show(view){
    homeView.classList.add("hidden");
    chapterView.classList.add("hidden");
    aboutView.classList.add("hidden");
    view.classList.remove("hidden");
  }

  function openChapter(chId){
    currentChapter = chapters.find(c => c.id === chId);
    if(!currentChapter) return;
    crumb.textContent = `ุฃูุชู ุงูุขู ูู: ${currentChapter.title}`;
    lessonSelect.innerHTML = "";
    currentChapter.lessons.forEach(ls => {
      const opt = document.createElement("option");
      opt.value = ls.id;
      opt.textContent = ls.name;
      lessonSelect.appendChild(opt);
    });
    aiOut.textContent = "ุณูุธูุฑ ุดุฑุญ ุงููุชุงุฆุฌ ููุง.";
    problemInput.value = "";
    selectedQuestion = null;
    if(questionSelect) questionSelect.value = "";
    refreshQuestionSelect();
    setTab("problems");
    updateLabForChapter();
    resetCh1LabView();
    show(chapterView);
  }

  function goHome(){
    currentChapter = null;
    show(homeView);
  }

  goHomeBtn.addEventListener("click", goHome);
  aboutBtn.addEventListener("click", () => show(aboutView));
  backFromAbout.addEventListener("click", () => show(homeView));

  function setTab(name){
    tabs.forEach(t => t.classList.toggle("active", t.dataset.tab === name));

    problemsPanel.classList.toggle("hidden", name !== "problems");
    labPanel.classList.toggle("hidden", name !== "lab");
    enrichPanel.classList.toggle("hidden", name !== "enrich");

    // ุฅุธูุงุฑ ุฎุงูุฉ ุงููุชูุฌุฉ ูุงูุดุฑุญ ููุท ูู ุชุจููุจ ุญู ุงููุณุงุฆู
    // (ูุชุฎุชูู ูู ุงูุฅุซุฑุงุกุงุช ูุงููุนูู)
    if(resultPanel){
      resultPanel.classList.toggle("hidden", name !== "problems");
    }

    if(name === "lab"){
      updateLabForChapter();
      if(currentChapter && currentChapter.id === "ch1"){
        resetCh1LabView();
      }else{
        runLab();
      }
    }

    if(name === "enrich"){
      genEnrichment();
    }
  }

  tabs.forEach(t => t.addEventListener("click", () => setTab(t.dataset.tab)));

  function getLessonName(){
    const v = lessonSelect.value;
    const found = currentChapter?.lessons.find(x => x.id === v);
    return found ? found.name : "ุงูุฏุฑุณ";
  }

  function offlineSolve(problemText, mode="solve"){
    const lesson = getLessonName();
    const chTitle = currentChapter?.title ?? "ุงููุตู";
    const cleaned = (problemText || "").trim();
    if(!cleaned) return `(${chTitle} โข ${lesson})\n\nุงูุชุจู ูุต ุงููุณุฃูุฉ ุฃูููุง โ๏ธ`;
    const hasForce = /ููุฉ|ูููุชู|F\b/i.test(cleaned);
    const hasMass = /ูุชูุฉ|ูุฌู|kg/i.test(cleaned);
    const hasAcc = /ุชุณุงุฑุน|ุนุฌูุฉ|m\/s\^2|ู\/ุซ\^2|a\b/i.test(cleaned);
    const hasVel = /ุณุฑุนุฉ|m\/s|ู\/ุซ|v\b/i.test(cleaned);
    const hasTime = /ุฒูู|ุซุงููุฉ|s\b|t\b/i.test(cleaned);
    const hasDist = /ูุณุงูุฉ|ุฅุฒุงุญุฉ|ูุชุฑ|m\b|s\b/i.test(cleaned);
    const hasFree = /ุณููุท|g\b|9\.8/i.test(cleaned);
    if(mode==="hint") return `(${chTitle} โข ${lesson})\n\nุชูููุญ โ\n- ุงูุชุจู ุงููุนุทูุงุช\n- ุญุฏุฏู ุงููุทููุจ\n- ุงุฎุชุงุฑู ูุงููู ููุงุณุจ`;
    let steps = [];
    steps.push(`(${chTitle} โข ${lesson})`);
    steps.push(`1) ููู ุงููุทููุจ: ุญุฏุฏู ูุง ุงูุฐู ูุจุญุซ ุนูู.`);
    steps.push(`2) ุงุณุชุฎุฑุงุฌ ุงููุนุทูุงุช: ุงูุชุจู ุงูููู ูุน ุงููุญุฏุงุช.`);
    steps.push(`3) ุงุฎุชูุงุฑ ุงููุงููู ุงูููุงุณุจ:`);
    if(hasForce && hasMass) steps.push(`   - ูุงููู ูููุชู ุงูุซุงูู: F = m a`);
    steps.push(`4) ุงูุชุนููุถ ุจุงูุฃุฑูุงู ุซู ุงูุชุฃูุฏ ูู ุงููุญุฏุงุช.`);
    steps.push(`5) ูุชุงุจุฉ ุงููุชูุฌุฉ ุจุดูู ูุงุถุญ.`);
    return steps.join("\n");
  }


  if(questionSelect){
    questionSelect.addEventListener("change", () => {
      const q = getQuestionById(questionSelect.value);
      selectedQuestion = q;
      if(q){
        // ูุนุฑุถ ูุต ุงูุณุคุงู ูู ูุฑุจุน ุงูุฅุฏุฎุงู (ูููู ููุทุงูุจุฉ ุชุนุฏููู)
        problemInput.value = q.text;
        aiOut.textContent = "โ ุชู ุงุฎุชูุงุฑ ุณุคุงู ุฌุงูุฒ. ุงุถุบุทู ยซุฃุนุทูู ุชูููุญยป ุฃู ยซุญูู ู ุงุดุฑุญยป.";
      }else{
        aiOut.textContent = "ุณูุธูุฑ ุดุฑุญ ุงููุชุงุฆุฌ ููุง.";
      }
    });
  }

  // ุฅุฐุง ุนุฏููุชู ุงููุต ูุฏูููุงุ ุงุนุชุจุฑูู ุณุคุงููุง ุญุฑููุง
  problemInput.addEventListener("input", () => {
    if(questionSelect && selectedQuestion && problemInput.value.trim() !== selectedQuestion.text.trim()){
      questionSelect.value = "";
      selectedQuestion = null;
    }
  });

  solveBtn.addEventListener("click", () => {
    if(selectedQuestion){
      aiOut.textContent = `๐งฉ ${selectedQuestion.text}\n\n๐ก ุชูููุญ:\n${selectedQuestion.hint}\n\nโ ุงูุญู ูุน ุงูุดุฑุญ:\n${selectedQuestion.solution}`;
    }else{
      aiOut.textContent = offlineSolve(problemInput.value, "solve");
    }
  });

  hintBtn.addEventListener("click", () => {
    if(selectedQuestion){
      aiOut.textContent = `๐ก ุชูููุญ ูุณุคุงู ุณ${selectedQuestion.id}:\n${selectedQuestion.hint}`;
    }else{
      aiOut.textContent = offlineSolve(problemInput.value, "hint");
    }
  });

  function syncRangeAndNumber(rangeEl, numEl){
    rangeEl.addEventListener("input", () => numEl.value = rangeEl.value);
    numEl.addEventListener("input", () => {
      let v = Number(numEl.value);
      if(Number.isNaN(v)) v = Number(rangeEl.min);
      v = Math.max(Number(rangeEl.min), Math.min(Number(rangeEl.max), v));
      numEl.value = v;
      rangeEl.value = v;
    });
  }
  syncRangeAndNumber(vRange, vVal);
  syncRangeAndNumber(tRange, tVal);
  syncRangeAndNumber(aRange, aVal);

  function runLab(){
    const v = Number(vVal.value);
    const t = Number(tVal.value);
    const a = Number(aVal.value);
    const s = v*t + 0.5*a*t*t;
    const vx = v + a*t;
    sOut.textContent = ` = ${s.toFixed(2)} ูุชุฑ`;
    vxOut.textContent = ` = ${vx.toFixed(2)} ู/ุซ`;
    let insight = "";
    if(a === 0) insight = "ุงูุญุฑูุฉ ููุชุธูุฉ.";
    else if(a > 0) insight = "ุชุณุงุฑุน ููุฌุจ.";
    else insight = "ุชุณุงุฑุน ุณุงูุจ.";
    insightOut.textContent = insight;
    drawPlot(v,a,t);
    (labOut || aiOut).textContent = `๐งช ูุชูุฌุฉ ุงููุนูู

ุงููุนุทูุงุช: vโ = ${v.toFixed(2)} ู/ุซ ุ t = ${t.toFixed(2)} ุซ ุ a = ${a.toFixed(2)} ู/ุซยฒ
ุงูููุงููู: s = vโ t + ยฝ a tยฒ ุ v = vโ + a t

ุงููุชุงุฆุฌ:
s = ${s.toFixed(2)} ู
v = ${vx.toFixed(2)} ู/ุซ

ุงูุชูุณูุฑ: ${insight}`;
  }

  runLabBtn.addEventListener("click", function(e){ if(e){e.preventDefault();e.stopPropagation();} runLab(); });

  function drawPlot(v,a,tMax){
    const W = canvas.clientWidth || 300, H = 240;
    ctx.clearRect(0,0,W,H);
    const N = 60;
    let xs = [];
    let yMax = 0;
    for(let i=0;i<=N;i++){
      const tt = tMax * (i/N);
      const x = v*tt + 0.5*a*tt*tt;
      xs.push({tt, x});
      yMax = Math.max(yMax, x);
    }
    yMax = Math.max(1, yMax);
    const padL=70, padR=20, padT=20, padB=55;
    const plotW = W - padL - padR;
    const plotH = H - padT - padB;
    ctx.strokeStyle = "#ddd";
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(padL, padT);
    ctx.lineTo(padL, H-padB);
    ctx.lineTo(W-padR, H-padB);
    ctx.stroke();
    ctx.strokeStyle = "#8b1d2c";
    ctx.lineWidth = 2;
    ctx.beginPath();
    for(let i=0;i<xs.length;i++){
      const px = padL + (xs[i].tt / tMax) * plotW;
      const py = (H-padB) - (xs[i].x / yMax) * plotH;
      if(i===0) ctx.moveTo(px, py);
      else ctx.lineTo(px, py);
    }
    ctx.stroke();
  }

  function genEnrichment(){
    const type = enrichType.value;
    const lesson = getLessonName();
    let content = "";
    if(type === "concept") content = `๐ฌ ููููู ูุชูุฏู: ${lesson}`;
    else if(type === "history") content = `๐ ุชุงุฑูุฎ ุงูููุฒูุงุก: ${lesson}`;
    else if(type === "realworld") content = `๐ ุชุทุจููุงุช ุญููููุฉ: ${lesson}`;
    else if(type === "challenge") content = `๐ฏ ุชุญุฏู ุฅุถุงูู: ${lesson}`;
    enrichOut.textContent = content;
  }

  genEnrichBtn.addEventListener("click", genEnrichment);
  renderChapters();

// ====== ุงููุตู ุงูุซุงูู: ุงูุงุฎุชุจุงุฑ ุงููููู (1โ6) ======
questionBank.ch2.push(
  {
    id:"MC2-1",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ููุซู ููู ููุญูู ุงููููุนโุงูุฒูู ุฃู ูููุฉ ููุฒูุงุฆูุฉุ",
    hint:"ููุฑู ูู ฮุงููููุน รท ฮุงูุฒูู.",
    solution:"ููุซู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ."
  },
  {
    id:"MC2-2",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ุฅุฐุง ุชุญุฑู ุฌุณู ุซู ุนุงุฏ ุฅูู ููุทุฉ ุงูุจุฏุงูุฉ ูุฅู ูููุฉ ุงูุฅุฒุงุญุฉ ุชููู:",
    hint:"ุงูุฅุฒุงุญุฉ ุชุนุชูุฏ ุนูู ุงูุจุฏุงูุฉ ูุงูููุงูุฉ ููุท.",
    solution:"ุชุณุงูู ุตูุฑูุง."
  },
  {
    id:"MC2-3",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ุฃู ูู ุงููููุงุช ุงูุขุชูุฉ ูููุฉ ูุชุฌูุฉุ",
    hint:"ุงููููุฉ ุงููุชุฌูุฉ ููุง ููุฏุงุฑ ูุงุชุฌุงู.",
    solution:"ุงูุฅุฒุงุญุฉ."
  },
  {
    id:"MC2-4",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ุฅุฐุง ูุงู ููุญูู ุงููููุนโุงูุฒูู ุฎุทูุง ุฃููููุง ููุฐุง ูุฏู ุนูู ุฃู ุงูุฌุณู:",
    hint:"ุงููููุน ูุง ูุชุบูุฑ.",
    solution:"ุณุงูู."
  },
  {
    id:"MC2-5",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ูุชู ุชููู ุงูุณุฑุนุฉ ุงููุชุฌูุฉ ุณุงูุจุฉุ",
    hint:"ุงูุชุจูู ูุงุชุฌุงู ุงูุญุฑูุฉ.",
    solution:"ุนูุฏูุง ุชููู ุงูุญุฑูุฉ ูู ุงูุงุชุฌุงู ุงูุณุงูุจ ุจุงููุณุจุฉ ููุงุชุฌุงู ุงูููุฌุจ ุงููุฎุชุงุฑ."
  },
  {
    id:"MC2-6",
    lesson:"ch2_exam",
    group:"scaled",
    text:"ูู ูููุฐุฌ ุงูุฌุณูู ุงูููุทูุ ูุงุฐุง ูุฏู ุชุฒุงูุฏ ุงููุณุงูุฉ ุจูู ุงูููุงุท ุงููุชุชุงููุฉุ",
    hint:"ุชุบูุฑ ุงูุณุฑุนุฉ ูุน ุงูุฒูู.",
    solution:"ุชุฒุงูุฏ ุณุฑุนุฉ ุงูุฌุณู."
  }
);

</script>


<script>
document.addEventListener('DOMContentLoaded', function () {
  const ch2LabContent = document.getElementById('ch2LabContent');
  const labSelectCh2 = document.getElementById('labSelectCh2');
  const carsLabCard = document.getElementById('carsLabCard');
  const instvLabCard = document.getElementById('instvLabCard');
  const runCarsBtn = document.getElementById('runCarsBtn');
  const carsResultOut = document.getElementById('carsResultOut');
  const runInstVBtn = document.getElementById('runInstVBtn');
  const instvResultOut = document.getElementById('instvResultOut');

  function resetCh2(){
    if(labSelectCh2) labSelectCh2.value = '';
    if(carsLabCard) carsLabCard.classList.add('hidden');
    if(instvLabCard) instvLabCard.classList.add('hidden');
    if(carsResultOut) carsResultOut.textContent = 'ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.';
    if(instvResultOut) instvResultOut.textContent = 'ุณูุธูุฑ ุงููุงุชุฌ ููุง ุจุนุฏ ุชูููุฐ ุงูุชุฌุฑุจุฉ.';
  }

  // show/hide lab cards (Chapter 2)
  if(labSelectCh2){
    labSelectCh2.addEventListener('change', function(){
      if(carsLabCard){ carsLabCard.classList.add('hidden'); carsLabCard.style.display="none"; }
      if(instvLabCard){ instvLabCard.classList.add('hidden'); instvLabCard.style.display="none"; }
      if(this.value === 'cars' && carsLabCard){ carsLabCard.classList.remove('hidden'); carsLabCard.style.display=""; }
      if(this.value === 'instv' && instvLabCard){ instvLabCard.classList.remove('hidden'); instvLabCard.style.display=""; }
    });
  }


  // "run" demo outputs (book example)
  if(runCarsBtn && carsResultOut){
    runCarsBtn.addEventListener('click', function(e){
      if(e){ e.preventDefault(); e.stopPropagation(); }
      const redDistCm = parseFloat(document.getElementById('redDistCm')?.value || '82');
      const blueDistCm = parseFloat(document.getElementById('blueDistCm')?.value || '76');
      const bothTimeS  = parseFloat(document.getElementById('bothTimeS')?.value || '1');

      const redTime1m  = parseFloat(document.getElementById('redTime1m')?.value || '1.14');
      const blueTime1m = parseFloat(document.getElementById('blueTime1m')?.value || '1.33');

      const redV_cm_s  = (bothTimeS>0)? (redDistCm/bothTimeS) : NaN;
      const blueV_cm_s = (bothTimeS>0)? (blueDistCm/bothTimeS) : NaN;

      // compare using both criteria if available
      let faster = "";
      if(isFinite(redV_cm_s) && isFinite(blueV_cm_s)){
        faster = redV_cm_s > blueV_cm_s ? "ุงูุญูุฑุงุก" : (blueV_cm_s > redV_cm_s ? "ุงูุฒุฑูุงุก" : "ูุชุณุงููุชุงู");
      }
      // secondary check (time for 1m): smaller time is faster
      let faster1m = "";
      if(isFinite(redTime1m) && isFinite(blueTime1m) && redTime1m>0 && blueTime1m>0){
        faster1m = redTime1m < blueTime1m ? "ุงูุญูุฑุงุก" : (blueTime1m < redTime1m ? "ุงูุฒุฑูุงุก" : "ูุชุณุงููุชุงู");
      }

      const explain =
        "๐ <b>ุงูุจูุงูุงุช (ูู ุฅุฏุฎุงูู):</b><br>" +
        "โข ุฎูุงู <b>"+bothTimeS.toFixed(2)+" s</b>: ุงูุญูุฑุงุก ูุทุนุช <b>"+redDistCm.toFixed(1)+" cm</b>ุ ูุงูุฒุฑูุงุก ูุทุนุช <b>"+blueDistCm.toFixed(1)+" cm</b>.<br>" +
        "โข ุงูุณุฑุนุฉ ุงููุชูุณุทุฉ (ุชูุฑูุจูุง): ุงูุญูุฑุงุก <b>"+(isFinite(redV_cm_s)?redV_cm_s.toFixed(1):"โ")+"</b> cm/sุ ูุงูุฒุฑูุงุก <b>"+(isFinite(blueV_cm_s)?blueV_cm_s.toFixed(1):"โ")+"</b> cm/s.<br><br>" +
        "โข ููุทุน 1 m: ุงูุญูุฑุงุก <b>"+redTime1m.toFixed(2)+" s</b>ุ ุงูุฒุฑูุงุก <b>"+blueTime1m.toFixed(2)+" s</b>.<br>";

      let resultLine = "";
      if(faster === "ูุชุณุงููุชุงู" && faster1m === "ูุชุณุงููุชุงู"){
        resultLine = "โ <b>ุงููุชูุฌุฉ:</b> ุงูุณูุงุฑุชุงู ูุชุณุงููุชุงู ุชูุฑูุจูุง ุญุณุจ ุงูููู ุงููุฏุฎูุฉ.";
      }else if(faster && faster !== "ูุชุณุงููุชุงู"){
        resultLine = "โ <b>ุงููุชูุฌุฉ (ุญุณุจ ุงููุณุงูุฉ ูู ููุณ ุงูุฒูู):</b> ุงูุณูุงุฑุฉ <b>"+faster+"</b> ุฃุณุฑุน.";
      }else{
        resultLine = "โ <b>ุงููุชูุฌุฉ:</b> ุฃุฏุฎูู ููู ุฒูู ุตุญูุญุฉ ููููุงุฑูุฉ.";
      }

      if(faster1m && faster1m !== "ูุชุณุงููุชุงู"){
        resultLine += "<br>โ <b>ุชุฃููุฏ (ุญุณุจ ุงูุฒูู ููุทุน 1m):</b> ุงูุณูุงุฑุฉ <b>"+faster1m+"</b> ุฃุณุฑุน (ุฒูู ุฃูู).";
      }

      carsResultOut.innerHTML = explain + "<br>" + resultLine;
      const aiOutBox = document.getElementById("aiOut");
      if(aiOutBox) aiOutBox.innerHTML = "๐๐ <b>ูุชูุฌุฉ ุชุฌุฑุจุฉ ุฃู ุงูุณูุงุฑุชูู ุฃุณุฑุนุ</b><br><br>" + carsResultOut.innerHTML;
    });
  }if(runInstVBtn && instvResultOut){
    runInstVBtn.addEventListener('click', function(e){
      if(e){ e.preventDefault(); e.stopPropagation(); }
      const point = document.getElementById('instvPoint')?.value || 'top';
      const dx = parseFloat(document.getElementById('instvDx')?.value || '0.2');
      const dt = parseFloat(document.getElementById('instvDt')?.value || '0.5');

      let dir = "โ";
      let v = NaN;

      if(dt > 0){
        // direction based on selected point
        if(point === 'top' || point === 'bottom'){
          v = 0;
          dir = "ูุง ููุฌุฏ (ุงูุณุฑุนุฉ = 0 ุนูุฏ ุงูููุฉ/ุงููุงุน)";
        }else if(point === 'midRight'){
          v = Math.abs(dx/dt);
          dir = "ูููููุง (ููุฌุจ)";
        }else if(point === 'midLeft'){
          v = -Math.abs(dx/dt);
          dir = "ูุณุงุฑูุง (ุณุงูุจ)";
        }
      }

      const pointName = {
        top:"ุงูููุฉ",
        bottom:"ุงููุงุน",
        midRight:"ุงูููุชุตู ูุชุฌูุฉ ูููููู",
        midLeft:"ุงูููุชุตู ูุชุฌูุฉ ูููุณุงุฑ"
      }[point] || "ููุทุฉ";

      instvResultOut.innerHTML =
        "๐งญ <b>ุฅุฏุฎุงูู:</b><br>" +
        "โข ุงูููุทุฉ: <b>"+pointName+"</b><br>" +
        "โข ฮx = <b>"+dx.toFixed(2)+" m</b> ุ ฮt = <b>"+dt.toFixed(2)+" s</b><br><br>" +
        "โ <b>ุงูุณุฑุนุฉ ุงููุญุธูุฉ (ุชูุฑูุจูุง):</b> <b>"+(isFinite(v)?v.toFixed(2):"โ")+"</b> m/s<br>" +
        "โก๏ธ <b>ุงูุงุชุฌุงู:</b> "+dir+"<br><br>" +
        "ููุงุญุธุฉ: ูู ุงูุญุฑูุฉ ุงูุงูุชุฒุงุฒูุฉ ุชููู ุงูุณุฑุนุฉ = 0 ุนูุฏ ุงูููุฉ ูุงููุงุนุ ูุชููู ุฃูุจุฑ ูุง ูููู ูุฑุจ ุงูููุชุตู.";
      const aiOutBox = document.getElementById("aiOut");
      if(aiOutBox) aiOutBox.innerHTML = "๐งญ <b>ูุชูุฌุฉ ุชุฌุฑุจุฉ ูุชุฌูุงุช ุงูุณุฑุนุฉ ุงููุญุธูุฉ</b><br><br>" + instvResultOut.innerHTML;
    });
  }// integrate with existing chapter switching (if present)
  // If your app exposes currentChapter.id and updateLabForChapter(), we hook into it safely.
  // We also try to detect when chapter 2 is active by URL hash or selected chapter buttons if currentChapter isn't global.
  function tryShowCh2(){
    // If there is a global currentChapter (as in the original file), prefer it
    try{
      if(typeof currentChapter !== 'undefined' && currentChapter && currentChapter.id){
        const isCh2 = currentChapter.id === 'ch2';
        if(ch2LabContent) ch2LabContent.classList.toggle('hidden', !isCh2);
        const defaultLabContent = document.getElementById('defaultLabContent');
        if(defaultLabContent) defaultLabContent.classList.toggle('hidden', isCh2);
        if(isCh2) resetCh2();
      }
    }catch(e){}
  }

  // Run once and also after any tab click (common in this file)
  tryShowCh2();
  document.addEventListener('click', function(ev){
    const t = ev.target;
    if(!t) return;
    // common selectors for chapter cards/tabs/buttons
    if(t.matches('.card, .tab, button, .chip')){
      setTimeout(tryShowCh2, 0);
    }
  });

});
</script>

<!-- =========================
     Mascot + Speech Bubble (MP4)
     v4 (post-v3 requested behavior)
========================== -->
<style>
  .mascot-wrap{
    position: fixed;
    z-index: 99999;
    display: none;              /* shown via JS */
    align-items: flex-end;
    gap: 12px;
    pointer-events: none;       /* clicks go to page */
    direction: ltr;             /* keep layout predictable with RTL page */
    transition: top .25s ease, right .25s ease, bottom .25s ease, left .25s ease, transform .25s ease, opacity .2s ease;
  }

  /* RIGHT side: mascot hugs the right edge, bubble goes inward (to the left) */
  .side-right{ flex-direction: row-reverse; }

  /* LEFT side: mascot hugs the left edge, bubble goes inward (to the right) */
  .side-left{  flex-direction: row; }

  /* Video (NO shadow, NO border, NO background) so it blends on white pages */
  .mascot-video{
    width: 96px;
    height: 96px;
    object-fit: contain;
    border-radius: 0;
    background: transparent !important;
    box-shadow: none !important;
    border: 0 !important;
    filter: none !important;
  }

  /* Bubble */
  .mascot-bubble{
    max-width: min(300px, 72vw);
    direction: rtl;
    background: rgba(255,255,255,.95);
    color: var(--ink, #0b3c5d);
    border: 2px solid rgba(125,211,252,.55);
    border-radius: 18px;
    padding: 12px 14px;
    line-height: 1.5;
    font-family: 'Cairo', sans-serif;
    font-weight: 800;
    box-shadow: 0 14px 30px rgba(11,60,93,.14);
    pointer-events: none;
    position: relative;
    transform: translateY(-18px);
  }
  /* Bubble tail removed */

  .mascot-bubble::after{ content: none !important; display: none !important; }

  /* Positions */
  .pos-wave{   right: 10px; bottom: 14px; }
  .pos-peek{   right: -13px;  top: 38%; transform: translateY(-38%); }
  .pos-think{  left:  6px;  top: 46%; transform: translateY(-46%); }
  .pos-jump{   right: 6px;  top: 70%; transform: translateY(-70%); }
  .pos-clap{   left:  10px; bottom: 14px; }

  @media (max-width: 600px){
    .mascot-video{ width: 78px; height: 78px; }
    .mascot-bubble{ font-size: 14px; max-width: 78vw; }
    .pos-jump{ top: 62%; transform: translateY(-62%); }
  }
</style>

<div id="mascotWrap" class="mascot-wrap pos-wave side-right" aria-live="polite">
  <!-- Mascot must be on the EDGE (video), bubble inward next to it -->
  <video id="mascotVideo" class="mascot-video" autoplay loop muted playsinline></video>
  <div id="mascotBubble" class="mascot-bubble"><span id="mascotText">ุฌุงูุฒุฉ ููุงูุทูุงูุ ููุจุฏุฃ ๐</span></div>
</div>

<script>
/* =========================
   Mascot system (MP4)
   (All changes requested AFTER v3)
   - NO X button
   - Mascot hides when user clicks ANY OTHER button
   - Wave only on HOME (before choosing any chapter)
   - Peek on LAB tab
   - Jump on running experiments
   - Think on hint
   - Clap on "ุญูู ู ุงุดุฑุญ"
   - Mascot is always on the edge; bubble inward beside it (right/left handled)
========================== */
(function(){
  const wrap   = document.getElementById('mascotWrap');
  const video  = document.getElementById('mascotVideo');
  const textEl = document.getElementById('mascotText');

  if(!wrap || !video || !textEl) return;

  const SCENES = {
    wave:  { src: 'assets/mascot/wave.mp4',  pos: 'pos-wave',  side: 'right',
      lines: ['ุฌุงูุฒุฉ ููุงูุทูุงูุ ููุจุฏุฃ ๐','ููุง ูุจุฏุฃ ุจุญูุงุณ ๐ฅ','ุจุฏุงูุฉ ูููุฉโฆ ุฎุทูุฉ ุฎุทูุฉ โจ'] },
    peek:  { src: 'assets/mascot/peek.mp4',  pos: 'pos-peek',  side: 'right',
      lines: ['ุฌุงูุฒุฉุ ูููุชุดู ๐','ุงูููู ุฏูุฑูู ูุชุตุจุญู ุนุงููุฉ ๐ฅ','ุฌุงูุฒุฉ ููุชุฌุฑุจุฉุ ๐'] },
    think: { src: 'assets/mascot/think.mp4', pos: 'pos-think', side: 'left',
      lines: ['ุฑูุฒู ูุชุฌุฏู ุงูุญู ๐ค','ุชุฑููุฒ ุจุณูุท ูุจุชุถุจุท โจ','ูู ูุญุงููุฉ ุชูุฑูุจู ๐ฅ'] },
    jump:  { src: 'assets/mascot/jump.mp4',  pos: 'pos-jump',  side: 'right',
      lines: ['ุชุนูููุง ุดูุก ููู ุงูููู! ๐','ุดุบู ููุชุงุฒ ๐ฅ','ููุง ูุดูู ุงููุชูุฌุฉ ๐'] },
    clap:  { src: 'assets/mascot/clap.mp4',  pos: 'pos-clap',  side: 'left',
      lines: ['ุฃุญุณูุชู ๐','ุชูุฏูู ุฑููุจ ๐ฅ','ููุชุงุฒโฆ ููููู ๐'] },
  };

  function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  function applyPos(scene){
    wrap.classList.remove('pos-wave','pos-peek','pos-think','pos-jump','pos-clap');
    wrap.classList.add(scene.pos);

    wrap.classList.remove('side-right','side-left');
    wrap.classList.add(scene.side === 'left' ? 'side-left' : 'side-right');
  }

  function show(type){
    const scene = SCENES[type];
    if(!scene) return;
    applyPos(scene);
    textEl.textContent = rand(scene.lines);

    // force reload to restart quickly (some browsers keep last frame)
    if(video.getAttribute('src') !== scene.src){
      video.setAttribute('src', scene.src);
    }else{
      try{ video.currentTime = 0; }catch(e){}
    }
    // ensure it plays
    try{ video.play(); }catch(e){}

    wrap.style.display = 'flex';
    wrap.style.opacity = '1';
    wrap.dataset.last = type;
  }

  function hide(){
    wrap.style.opacity = '0';
    wrap.style.display = 'none';
  }

  function isHomeVisible(){
    const home = document.getElementById('homeView');
    const ch   = document.getElementById('chapterView');
    if(!home) return false;
    // Home is visible when it doesn't have "hidden"
    const homeOn = !home.classList.contains('hidden');
    // If chapter view is visible, it's not home
    const chOn = ch && !ch.classList.contains('hidden');
    return homeOn && !chOn;
  }

  // ===== initial =====
  if(isHomeVisible()) show('wave'); else hide();

  // ===== hooks into navigation =====
  // Patch openChapter/goHome if they exist (safe)
  function patch(name, afterFn){
    const fn = window[name];
    if(typeof fn !== 'function') return;
    if(fn.__mascotPatched) return;
    const wrapped = function(){
      const r = fn.apply(this, arguments);
      try{ afterFn.apply(this, arguments); }catch(e){}
      return r;
    };
    wrapped.__mascotPatched = true;
    window[name] = wrapped;
  }

  patch('openChapter', function(){
    // leaving home -> hide wave immediately
    hide();
  });

  patch('goHome', function(){
    // back to home -> show wave
    show('wave');
  });

  // About page back to home
  const backFromAbout = document.getElementById('backFromAbout');
  if(backFromAbout){
    backFromAbout.addEventListener('click', function(){
      setTimeout(function(){ if(isHomeVisible()) show('wave'); }, 0);
    });
  }

  // Home button
  const goHomeBtn = document.getElementById('goHomeBtn');
  if(goHomeBtn){
    goHomeBtn.addEventListener('click', function(){
      setTimeout(function(){ if(isHomeVisible()) show('wave'); }, 0);
    });
  }

  // ===== specific triggers =====
  const hintBtn  = document.getElementById('hintBtn');
  const solveBtn = document.getElementById('solveBtn');

  if(hintBtn)  hintBtn.addEventListener('click', function(e){ show('think'); });
  if(solveBtn) solveBtn.addEventListener('click', function(e){ show('clap'); });

  // Any "run" experiment button -> jump
  const runBtnIds = ['runFallBtn','runSpringBtn','runCarsBtn','runInstVBtn','runLabBtn'];
  runBtnIds.forEach(id=>{
    const b = document.getElementById(id);
    if(b) b.addEventListener('click', function(e){ show('jump'); });
  });

  // Tabs:
  // - lab tab -> peek
  // - others -> hide (unless home)
  document.querySelectorAll('.tab').forEach(tab=>{
    tab.addEventListener('click', function(){
      const tabName = this.getAttribute('data-tab');
      setTimeout(function(){
        if(isHomeVisible()){
          show('wave');
          return;
        }
        if(tabName === 'lab') show('peek');
        else hide();
      }, 0);
    });
  });

  // ===== hide on ANY OTHER button =====
  const triggerButtons = new Set([
    'hintBtn','solveBtn',
    'runFallBtn','runSpringBtn','runCarsBtn','runInstVBtn','runLabBtn',
    'goHomeBtn','backFromAbout'
  ]);

  document.addEventListener('click', function(ev){
    const btn = ev.target && ev.target.closest ? ev.target.closest('button') : null;
    if(!btn) return;

    const id = btn.getAttribute('id') || '';
    // Let trigger buttons do their thing
    if(triggerButtons.has(id)) return;

    // Chapter selection cards are DIVs, so not captured here.
    // Any other button click => hide mascot.
    hide();
  }, true);

  // ===== hide wave when user picks any chapter card (click card) =====
  document.addEventListener('click', function(ev){
    const card = ev.target && ev.target.closest ? ev.target.closest('.card') : null;
    if(card){
      // selecting chapter
      hide();
    }
  }, true);

  // Expose for debugging if needed
  window.__showMascot = show;
  window.__hideMascot = hide;
})();
</script>

</body>
</html>
